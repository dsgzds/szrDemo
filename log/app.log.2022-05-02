2022-05-02 09:32:07,308, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 129, in handle_events
    event = self.conn.next_event()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/h11/_connection.py", line 443, in next_event
    exc._reraise_as_remote_protocol_error()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/h11/_util.py", line 76, in _reraise_as_remote_protocol_error
    raise self
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/h11/_connection.py", line 425, in next_event
    event = self._extract_next_receive_event()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/h11/_connection.py", line 367, in _extract_next_receive_event
    event = self._reader(self._receive_buffer)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/h11/_readers.py", line 68, in maybe_read_from_IDLE_client
    raise LocalProtocolError("illegal request line")
h11._util.RemoteProtocolError: illegal request line
2022-05-02 11:01:16,343, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 129, in handle_events
    event = self.conn.next_event()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/h11/_connection.py", line 443, in next_event
    exc._reraise_as_remote_protocol_error()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/h11/_util.py", line 76, in _reraise_as_remote_protocol_error
    raise self
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/h11/_connection.py", line 425, in next_event
    event = self._extract_next_receive_event()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/h11/_connection.py", line 367, in _extract_next_receive_event
    event = self._reader(self._receive_buffer)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/h11/_readers.py", line 68, in maybe_read_from_IDLE_client
    raise LocalProtocolError("illegal request line")
h11._util.RemoteProtocolError: illegal request line
2022-05-02 17:14:49,237, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 129, in handle_events
    event = self.conn.next_event()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/h11/_connection.py", line 443, in next_event
    exc._reraise_as_remote_protocol_error()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/h11/_util.py", line 76, in _reraise_as_remote_protocol_error
    raise self
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/h11/_connection.py", line 425, in next_event
    event = self._extract_next_receive_event()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/h11/_connection.py", line 367, in _extract_next_receive_event
    event = self._reader(self._receive_buffer)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/h11/_readers.py", line 68, in maybe_read_from_IDLE_client
    raise LocalProtocolError("illegal request line")
h11._util.RemoteProtocolError: illegal request line
2022-05-02 21:44:33,046, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 21:44:35,045, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 170
2022-05-02 21:47:47,905, WARNING StatReload detected file change in 'schemas/models.py'. Reloading...
2022-05-02 21:47:47,940, INFO Shutting down
2022-05-02 21:47:48,041, INFO Waiting for application shutdown.
2022-05-02 21:47:48,042, INFO Application shutdown complete.
2022-05-02 21:47:48,043, INFO Finished server process [2132858]
2022-05-02 21:47:48,817, DEBUG Using selector: EpollSelector
2022-05-02 21:47:48,908, INFO Started server process [3689831]
2022-05-02 21:47:48,908, INFO Started server process [3689831]
2022-05-02 21:47:48,909, INFO Waiting for application startup.
2022-05-02 21:47:48,909, INFO Waiting for application startup.
2022-05-02 21:47:48,909, INFO Application startup complete.
2022-05-02 21:47:48,909, INFO Application startup complete.
2022-05-02 21:49:39,534, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-02 21:49:39,603, INFO Shutting down
2022-05-02 21:49:39,603, INFO Shutting down
2022-05-02 21:49:39,705, INFO Waiting for application shutdown.
2022-05-02 21:49:39,705, INFO Waiting for application shutdown.
2022-05-02 21:49:39,705, INFO Application shutdown complete.
2022-05-02 21:49:39,705, INFO Application shutdown complete.
2022-05-02 21:49:39,706, INFO Finished server process [3689831]
2022-05-02 21:49:39,706, INFO Finished server process [3689831]
2022-05-02 21:49:40,467, DEBUG Using selector: EpollSelector
2022-05-02 21:49:40,563, INFO Started server process [3691218]
2022-05-02 21:49:40,563, INFO Started server process [3691218]
2022-05-02 21:49:40,563, INFO Waiting for application startup.
2022-05-02 21:49:40,563, INFO Waiting for application startup.
2022-05-02 21:49:40,564, INFO Application startup complete.
2022-05-02 21:49:40,564, INFO Application startup complete.
2022-05-02 21:49:54,579, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 21:49:54,579, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 21:49:56,553, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 161
2022-05-02 21:49:56,553, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 161
2022-05-02 21:54:53,993, INFO Will watch for changes in these directories: ['/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a']
2022-05-02 21:54:53,993, ERROR [Errno 98] Address already in use
2022-05-02 21:55:13,959, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 21:55:13,959, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 21:55:15,905, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 183
2022-05-02 21:55:15,905, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 183
2022-05-02 21:55:37,192, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 21:55:37,192, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 21:55:39,164, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 167
2022-05-02 21:55:39,164, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 167
2022-05-02 22:03:32,159, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:03:32,159, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:03:33,150, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 110
2022-05-02 22:03:33,150, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 110
2022-05-02 22:08:41,782, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:08:41,782, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:08:43,749, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 216
2022-05-02 22:08:43,749, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 216
2022-05-02 22:13:59,321, INFO Will watch for changes in these directories: ['/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a']
2022-05-02 22:13:59,321, ERROR [Errno 98] Address already in use
2022-05-02 22:14:20,731, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:14:20,731, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:14:22,682, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 182
2022-05-02 22:14:22,682, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 182
2022-05-02 22:14:39,253, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:14:39,253, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:14:41,161, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 159
2022-05-02 22:14:41,161, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 159
2022-05-02 22:16:35,609, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:16:35,609, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:16:37,614, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 164
2022-05-02 22:16:37,614, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 164
2022-05-02 22:16:54,961, INFO Will watch for changes in these directories: ['/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a']
2022-05-02 22:16:54,962, ERROR [Errno 98] Address already in use
2022-05-02 22:16:57,606, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:16:57,606, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:16:59,541, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 118
2022-05-02 22:16:59,541, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 118
2022-05-02 22:17:03,978, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:17:03,978, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:17:05,892, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 69
2022-05-02 22:17:05,892, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 69
2022-05-02 22:17:09,781, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:17:09,781, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:17:10,080, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 66
2022-05-02 22:17:10,080, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 66
2022-05-02 22:17:12,187, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:17:12,187, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:17:14,106, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 114
2022-05-02 22:17:14,106, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 114
2022-05-02 22:21:20,439, INFO Will watch for changes in these directories: ['/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a']
2022-05-02 22:21:20,440, ERROR [Errno 98] Address already in use
2022-05-02 22:21:40,710, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-02 22:21:40,811, INFO Shutting down
2022-05-02 22:21:40,811, INFO Shutting down
2022-05-02 22:21:40,912, INFO Waiting for application shutdown.
2022-05-02 22:21:40,912, INFO Waiting for application shutdown.
2022-05-02 22:21:40,913, INFO Application shutdown complete.
2022-05-02 22:21:40,913, INFO Application shutdown complete.
2022-05-02 22:21:40,913, INFO Finished server process [3691218]
2022-05-02 22:21:40,913, INFO Finished server process [3691218]
2022-05-02 22:21:41,663, DEBUG Using selector: EpollSelector
2022-05-02 22:21:41,760, INFO Started server process [3718479]
2022-05-02 22:21:41,760, INFO Started server process [3718479]
2022-05-02 22:21:41,761, INFO Waiting for application startup.
2022-05-02 22:21:41,761, INFO Waiting for application startup.
2022-05-02 22:21:41,761, INFO Application startup complete.
2022-05-02 22:21:41,761, INFO Application startup complete.
2022-05-02 22:21:42,078, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-02 22:21:42,163, INFO Shutting down
2022-05-02 22:21:42,163, INFO Shutting down
2022-05-02 22:21:42,264, INFO Waiting for application shutdown.
2022-05-02 22:21:42,264, INFO Waiting for application shutdown.
2022-05-02 22:21:42,265, INFO Application shutdown complete.
2022-05-02 22:21:42,265, INFO Application shutdown complete.
2022-05-02 22:21:42,265, INFO Finished server process [3718479]
2022-05-02 22:21:42,265, INFO Finished server process [3718479]
2022-05-02 22:21:42,946, DEBUG Using selector: EpollSelector
2022-05-02 22:21:43,044, INFO Started server process [3718496]
2022-05-02 22:21:43,044, INFO Started server process [3718496]
2022-05-02 22:21:43,044, INFO Waiting for application startup.
2022-05-02 22:21:43,044, INFO Waiting for application startup.
2022-05-02 22:21:43,045, INFO Application startup complete.
2022-05-02 22:21:43,045, INFO Application startup complete.
2022-05-02 22:21:43,647, WARNING StatReload detected file change in 'dal.py'. Reloading...
2022-05-02 22:21:43,748, INFO Shutting down
2022-05-02 22:21:43,748, INFO Shutting down
2022-05-02 22:21:43,849, INFO Waiting for application shutdown.
2022-05-02 22:21:43,849, INFO Waiting for application shutdown.
2022-05-02 22:21:43,850, INFO Application shutdown complete.
2022-05-02 22:21:43,850, INFO Application shutdown complete.
2022-05-02 22:21:43,850, INFO Finished server process [3718496]
2022-05-02 22:21:43,850, INFO Finished server process [3718496]
2022-05-02 22:21:44,550, DEBUG Using selector: EpollSelector
2022-05-02 22:21:44,644, INFO Started server process [3718524]
2022-05-02 22:21:44,644, INFO Started server process [3718524]
2022-05-02 22:21:44,644, INFO Waiting for application startup.
2022-05-02 22:21:44,644, INFO Waiting for application startup.
2022-05-02 22:21:44,644, INFO Application startup complete.
2022-05-02 22:21:44,644, INFO Application startup complete.
2022-05-02 22:21:47,752, INFO Will watch for changes in these directories: ['/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a']
2022-05-02 22:21:47,752, ERROR [Errno 98] Address already in use
2022-05-02 22:23:02,619, INFO Will watch for changes in these directories: ['/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a']
2022-05-02 22:23:02,620, ERROR [Errno 98] Address already in use
2022-05-02 22:24:03,013, INFO Will watch for changes in these directories: ['/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a']
2022-05-02 22:24:03,013, INFO Uvicorn running on http://0.0.0.0:9090 (Press CTRL+C to quit)
2022-05-02 22:24:03,013, INFO Started reloader process [3720641] using statreload
2022-05-02 22:24:03,685, DEBUG Using selector: EpollSelector
2022-05-02 22:24:03,783, INFO Started server process [3720650]
2022-05-02 22:24:03,783, INFO Started server process [3720650]
2022-05-02 22:24:03,783, INFO Waiting for application startup.
2022-05-02 22:24:03,783, INFO Waiting for application startup.
2022-05-02 22:24:03,783, INFO Application startup complete.
2022-05-02 22:24:03,783, INFO Application startup complete.
2022-05-02 22:24:08,914, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:24:08,914, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:24:10,251, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 152
2022-05-02 22:24:10,251, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 152
2022-05-02 22:24:10,255, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 422, in test
    f = open(f"openai/test/data/EmpatheticDialogues/{emotion}.json","r")
FileNotFoundError: [Errno 2] No such file or directory: 'openai/test/data/EmpatheticDialogues/sad.json'
2022-05-02 22:24:10,255, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 422, in test
    f = open(f"openai/test/data/EmpatheticDialogues/{emotion}.json","r")
FileNotFoundError: [Errno 2] No such file or directory: 'openai/test/data/EmpatheticDialogues/sad.json'
2022-05-02 22:24:28,977, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:24:28,977, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:24:30,074, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 154
2022-05-02 22:24:30,074, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 154
2022-05-02 22:24:30,078, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 454, in test
    if rsp.status_code ==200:
UnboundLocalError: local variable 'rsp' referenced before assignment
2022-05-02 22:24:30,078, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 454, in test
    if rsp.status_code ==200:
UnboundLocalError: local variable 'rsp' referenced before assignment
2022-05-02 22:30:59,816, INFO Will watch for changes in these directories: ['/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a']
2022-05-02 22:30:59,817, ERROR [Errno 98] Address already in use
2022-05-02 22:31:13,163, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:31:13,163, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:31:15,218, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 230
2022-05-02 22:31:15,218, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 230
2022-05-02 22:31:15,222, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 454, in test
    if rsp.status_code ==200:
UnboundLocalError: local variable 'rsp' referenced before assignment
2022-05-02 22:31:15,222, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 454, in test
    if rsp.status_code ==200:
UnboundLocalError: local variable 'rsp' referenced before assignment
2022-05-02 22:31:31,784, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-02 22:31:31,840, INFO Shutting down
2022-05-02 22:31:31,840, INFO Shutting down
2022-05-02 22:31:31,942, INFO Waiting for application shutdown.
2022-05-02 22:31:31,942, INFO Waiting for application shutdown.
2022-05-02 22:31:31,942, INFO Application shutdown complete.
2022-05-02 22:31:31,942, INFO Application shutdown complete.
2022-05-02 22:31:31,943, INFO Finished server process [3720650]
2022-05-02 22:31:31,943, INFO Finished server process [3720650]
2022-05-02 22:31:32,737, DEBUG Using selector: EpollSelector
2022-05-02 22:31:32,838, INFO Started server process [3726977]
2022-05-02 22:31:32,838, INFO Started server process [3726977]
2022-05-02 22:31:32,838, INFO Waiting for application startup.
2022-05-02 22:31:32,838, INFO Waiting for application startup.
2022-05-02 22:31:32,838, INFO Application startup complete.
2022-05-02 22:31:32,838, INFO Application startup complete.
2022-05-02 22:32:04,546, INFO Will watch for changes in these directories: ['/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a']
2022-05-02 22:32:04,546, INFO Uvicorn running on http://0.0.0.0:9090 (Press CTRL+C to quit)
2022-05-02 22:32:04,546, INFO Started reloader process [3727538] using statreload
2022-05-02 22:32:05,193, DEBUG Using selector: EpollSelector
2022-05-02 22:32:05,286, INFO Started server process [3727547]
2022-05-02 22:32:05,286, INFO Started server process [3727547]
2022-05-02 22:32:05,286, INFO Waiting for application startup.
2022-05-02 22:32:05,286, INFO Waiting for application startup.
2022-05-02 22:32:05,287, INFO Application startup complete.
2022-05-02 22:32:05,287, INFO Application startup complete.
2022-05-02 22:32:15,529, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:32:15,529, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:32:17,545, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 177
2022-05-02 22:32:17,545, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 177
2022-05-02 22:32:17,548, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 454, in test
    if response.status_code ==200:
AttributeError: 'str' object has no attribute 'status_code'
2022-05-02 22:32:17,548, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 454, in test
    if response.status_code ==200:
AttributeError: 'str' object has no attribute 'status_code'
2022-05-02 22:33:45,775, INFO Will watch for changes in these directories: ['/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a']
2022-05-02 22:33:45,775, ERROR [Errno 98] Address already in use
2022-05-02 22:34:09,395, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:34:09,395, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:34:11,391, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 186
2022-05-02 22:34:11,391, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 186
2022-05-02 22:34:11,394, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 454, in test
    if response.status_code ==200:
AttributeError: 'str' object has no attribute 'status_code'
2022-05-02 22:34:11,394, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 454, in test
    if response.status_code ==200:
AttributeError: 'str' object has no attribute 'status_code'
2022-05-02 22:34:35,765, INFO Will watch for changes in these directories: ['/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a']
2022-05-02 22:34:35,766, INFO Uvicorn running on http://0.0.0.0:9090 (Press CTRL+C to quit)
2022-05-02 22:34:35,766, INFO Started reloader process [3729692] using statreload
2022-05-02 22:34:36,395, DEBUG Using selector: EpollSelector
2022-05-02 22:34:36,487, INFO Started server process [3729704]
2022-05-02 22:34:36,487, INFO Started server process [3729704]
2022-05-02 22:34:36,488, INFO Waiting for application startup.
2022-05-02 22:34:36,488, INFO Waiting for application startup.
2022-05-02 22:34:36,488, INFO Application startup complete.
2022-05-02 22:34:36,488, INFO Application startup complete.
2022-05-02 22:34:47,502, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:34:47,502, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:34:48,957, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 199
2022-05-02 22:34:48,957, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 199
2022-05-02 22:34:48,960, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 454, in test
    if response.status_code ==200:
AttributeError: 'str' object has no attribute 'status_code'
2022-05-02 22:34:48,960, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 454, in test
    if response.status_code ==200:
AttributeError: 'str' object has no attribute 'status_code'
2022-05-02 22:37:31,880, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-02 22:37:31,910, INFO Shutting down
2022-05-02 22:37:31,910, INFO Shutting down
2022-05-02 22:37:32,012, INFO Waiting for application shutdown.
2022-05-02 22:37:32,012, INFO Waiting for application shutdown.
2022-05-02 22:37:32,013, INFO Application shutdown complete.
2022-05-02 22:37:32,013, INFO Application shutdown complete.
2022-05-02 22:37:32,013, INFO Finished server process [3729704]
2022-05-02 22:37:32,013, INFO Finished server process [3729704]
2022-05-02 22:37:32,663, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-02 22:37:33,311, DEBUG Using selector: EpollSelector
2022-05-02 22:37:33,409, INFO Started server process [3732122]
2022-05-02 22:37:33,409, INFO Started server process [3732122]
2022-05-02 22:37:33,409, INFO Waiting for application startup.
2022-05-02 22:37:33,409, INFO Waiting for application startup.
2022-05-02 22:37:33,410, INFO Application startup complete.
2022-05-02 22:37:33,410, INFO Application startup complete.
2022-05-02 22:37:35,495, WARNING StatReload detected file change in 'dal.py'. Reloading...
2022-05-02 22:37:35,518, INFO Shutting down
2022-05-02 22:37:35,518, INFO Shutting down
2022-05-02 22:37:35,619, INFO Waiting for application shutdown.
2022-05-02 22:37:35,619, INFO Waiting for application shutdown.
2022-05-02 22:37:35,620, INFO Application shutdown complete.
2022-05-02 22:37:35,620, INFO Application shutdown complete.
2022-05-02 22:37:35,620, INFO Finished server process [3732122]
2022-05-02 22:37:35,620, INFO Finished server process [3732122]
2022-05-02 22:37:36,238, WARNING StatReload detected file change in 'schemas/models.py'. Reloading...
2022-05-02 22:37:36,886, DEBUG Using selector: EpollSelector
2022-05-02 22:37:36,984, INFO Started server process [3732172]
2022-05-02 22:37:36,984, INFO Started server process [3732172]
2022-05-02 22:37:36,984, INFO Waiting for application startup.
2022-05-02 22:37:36,984, INFO Waiting for application startup.
2022-05-02 22:37:36,985, INFO Application startup complete.
2022-05-02 22:37:36,985, INFO Application startup complete.
2022-05-02 22:38:05,381, INFO Will watch for changes in these directories: ['/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a']
2022-05-02 22:38:05,381, INFO Uvicorn running on http://0.0.0.0:9090 (Press CTRL+C to quit)
2022-05-02 22:38:05,381, INFO Started reloader process [3732607] using statreload
2022-05-02 22:38:06,036, DEBUG Using selector: EpollSelector
2022-05-02 22:38:06,130, INFO Started server process [3732616]
2022-05-02 22:38:06,130, INFO Started server process [3732616]
2022-05-02 22:38:06,131, INFO Waiting for application startup.
2022-05-02 22:38:06,131, INFO Waiting for application startup.
2022-05-02 22:38:06,131, INFO Application startup complete.
2022-05-02 22:38:06,131, INFO Application startup complete.
2022-05-02 22:38:16,151, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:38:16,151, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:38:18,207, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 209
2022-05-02 22:38:18,207, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 209
2022-05-02 22:38:18,210, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 386, in test
    response = rsp.get('texts')[0]
AttributeError: 'Response' object has no attribute 'get'
2022-05-02 22:38:18,210, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 386, in test
    response = rsp.get('texts')[0]
AttributeError: 'Response' object has no attribute 'get'
2022-05-02 22:50:15,639, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-02 22:50:15,697, INFO Shutting down
2022-05-02 22:50:15,697, INFO Shutting down
2022-05-02 22:50:15,799, INFO Waiting for application shutdown.
2022-05-02 22:50:15,799, INFO Waiting for application shutdown.
2022-05-02 22:50:15,800, INFO Application shutdown complete.
2022-05-02 22:50:15,800, INFO Application shutdown complete.
2022-05-02 22:50:15,801, INFO Finished server process [3732616]
2022-05-02 22:50:15,801, INFO Finished server process [3732616]
2022-05-02 22:50:16,714, DEBUG Using selector: EpollSelector
2022-05-02 22:50:16,816, INFO Started server process [3742872]
2022-05-02 22:50:16,816, INFO Started server process [3742872]
2022-05-02 22:50:16,816, INFO Waiting for application startup.
2022-05-02 22:50:16,816, INFO Waiting for application startup.
2022-05-02 22:50:16,816, INFO Application startup complete.
2022-05-02 22:50:16,816, INFO Application startup complete.
2022-05-02 22:50:24,678, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-02 22:50:24,750, INFO Shutting down
2022-05-02 22:50:24,750, INFO Shutting down
2022-05-02 22:50:24,851, INFO Waiting for application shutdown.
2022-05-02 22:50:24,851, INFO Waiting for application shutdown.
2022-05-02 22:50:24,852, INFO Application shutdown complete.
2022-05-02 22:50:24,852, INFO Application shutdown complete.
2022-05-02 22:50:24,852, INFO Finished server process [3742872]
2022-05-02 22:50:24,852, INFO Finished server process [3742872]
2022-05-02 22:50:25,643, DEBUG Using selector: EpollSelector
2022-05-02 22:50:25,744, INFO Started server process [3742984]
2022-05-02 22:50:25,744, INFO Started server process [3742984]
2022-05-02 22:50:25,745, INFO Waiting for application startup.
2022-05-02 22:50:25,745, INFO Waiting for application startup.
2022-05-02 22:50:25,745, INFO Application startup complete.
2022-05-02 22:50:25,745, INFO Application startup complete.
2022-05-02 22:50:58,186, INFO Will watch for changes in these directories: ['/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a']
2022-05-02 22:50:58,187, INFO Uvicorn running on http://0.0.0.0:9090 (Press CTRL+C to quit)
2022-05-02 22:50:58,187, INFO Started reloader process [3743484] using statreload
2022-05-02 22:50:58,870, DEBUG Using selector: EpollSelector
2022-05-02 22:50:58,966, INFO Started server process [3743500]
2022-05-02 22:50:58,966, INFO Started server process [3743500]
2022-05-02 22:50:58,967, INFO Waiting for application startup.
2022-05-02 22:50:58,967, INFO Waiting for application startup.
2022-05-02 22:50:58,967, INFO Application startup complete.
2022-05-02 22:50:58,967, INFO Application startup complete.
2022-05-02 22:51:11,490, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:51:11,490, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:51:13,692, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 239
2022-05-02 22:51:13,692, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 239
2022-05-02 22:51:13,695, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 445, in test
    response = rsp['texts']
TypeError: 'Response' object is not subscriptable
2022-05-02 22:51:13,695, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 445, in test
    response = rsp['texts']
TypeError: 'Response' object is not subscriptable
2022-05-02 22:51:54,187, WARNING StatReload detected file change in 'dal.py'. Reloading...
2022-05-02 22:51:54,285, INFO Shutting down
2022-05-02 22:51:54,285, INFO Shutting down
2022-05-02 22:51:54,387, INFO Waiting for application shutdown.
2022-05-02 22:51:54,387, INFO Waiting for application shutdown.
2022-05-02 22:51:54,387, INFO Application shutdown complete.
2022-05-02 22:51:54,387, INFO Application shutdown complete.
2022-05-02 22:51:54,388, INFO Finished server process [3743500]
2022-05-02 22:51:54,388, INFO Finished server process [3743500]
2022-05-02 22:51:55,209, DEBUG Using selector: EpollSelector
2022-05-02 22:51:55,309, INFO Started server process [3744231]
2022-05-02 22:51:55,309, INFO Started server process [3744231]
2022-05-02 22:51:55,309, INFO Waiting for application startup.
2022-05-02 22:51:55,309, INFO Waiting for application startup.
2022-05-02 22:51:55,310, INFO Application startup complete.
2022-05-02 22:51:55,310, INFO Application startup complete.
2022-05-02 22:52:34,832, INFO Will watch for changes in these directories: ['/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a']
2022-05-02 22:52:34,833, INFO Uvicorn running on http://0.0.0.0:9090 (Press CTRL+C to quit)
2022-05-02 22:52:34,833, INFO Started reloader process [3744824] using statreload
2022-05-02 22:52:35,516, DEBUG Using selector: EpollSelector
2022-05-02 22:52:35,610, INFO Started server process [3744836]
2022-05-02 22:52:35,610, INFO Started server process [3744836]
2022-05-02 22:52:35,611, INFO Waiting for application startup.
2022-05-02 22:52:35,611, INFO Waiting for application startup.
2022-05-02 22:52:35,611, INFO Application startup complete.
2022-05-02 22:52:35,611, INFO Application startup complete.
2022-05-02 22:52:39,510, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:52:39,510, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:52:41,058, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 153
2022-05-02 22:52:41,058, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 153
2022-05-02 22:52:41,064, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 445, in test
    response = rsp['texts']
TypeError: 'Response' object is not subscriptable
2022-05-02 22:52:41,064, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 445, in test
    response = rsp['texts']
TypeError: 'Response' object is not subscriptable
2022-05-02 22:58:40,296, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:58:40,296, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:58:42,321, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 234
2022-05-02 22:58:42,321, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 234
2022-05-02 22:58:42,325, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 445, in test
    response = rsp['texts']
TypeError: 'Response' object is not subscriptable
2022-05-02 22:58:42,325, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 445, in test
    response = rsp['texts']
TypeError: 'Response' object is not subscriptable
2022-05-02 22:59:55,693, INFO Will watch for changes in these directories: ['/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a']
2022-05-02 22:59:55,693, INFO Uvicorn running on http://0.0.0.0:9090 (Press CTRL+C to quit)
2022-05-02 22:59:55,693, INFO Started reloader process [3750380] using statreload
2022-05-02 22:59:56,335, DEBUG Using selector: EpollSelector
2022-05-02 22:59:56,429, INFO Started server process [3750392]
2022-05-02 22:59:56,429, INFO Started server process [3750392]
2022-05-02 22:59:56,429, INFO Waiting for application startup.
2022-05-02 22:59:56,429, INFO Waiting for application startup.
2022-05-02 22:59:56,429, INFO Application startup complete.
2022-05-02 22:59:56,429, INFO Application startup complete.
2022-05-02 22:59:59,837, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 22:59:59,837, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 23:00:01,878, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 238
2022-05-02 23:00:01,878, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 238
2022-05-02 23:00:01,885, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 445, in test
    response = rsp['texts']
TypeError: 'Response' object is not subscriptable
2022-05-02 23:00:01,885, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 445, in test
    response = rsp['texts']
TypeError: 'Response' object is not subscriptable
2022-05-02 23:00:14,499, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-02 23:00:14,502, INFO Shutting down
2022-05-02 23:00:14,502, INFO Shutting down
2022-05-02 23:00:14,604, INFO Waiting for application shutdown.
2022-05-02 23:00:14,604, INFO Waiting for application shutdown.
2022-05-02 23:00:14,604, INFO Application shutdown complete.
2022-05-02 23:00:14,604, INFO Application shutdown complete.
2022-05-02 23:00:14,605, INFO Finished server process [3750392]
2022-05-02 23:00:14,605, INFO Finished server process [3750392]
2022-05-02 23:00:15,347, DEBUG Using selector: EpollSelector
2022-05-02 23:00:15,445, INFO Started server process [3750704]
2022-05-02 23:00:15,445, INFO Started server process [3750704]
2022-05-02 23:00:15,445, INFO Waiting for application startup.
2022-05-02 23:00:15,445, INFO Waiting for application startup.
2022-05-02 23:00:15,445, INFO Application startup complete.
2022-05-02 23:00:15,445, INFO Application startup complete.
2022-05-02 23:00:52,750, INFO Will watch for changes in these directories: ['/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a']
2022-05-02 23:00:52,751, INFO Uvicorn running on http://0.0.0.0:9090 (Press CTRL+C to quit)
2022-05-02 23:00:52,751, INFO Started reloader process [3751408] using statreload
2022-05-02 23:00:53,393, DEBUG Using selector: EpollSelector
2022-05-02 23:00:53,487, INFO Started server process [3751417]
2022-05-02 23:00:53,487, INFO Started server process [3751417]
2022-05-02 23:00:53,487, INFO Waiting for application startup.
2022-05-02 23:00:53,487, INFO Waiting for application startup.
2022-05-02 23:00:53,487, INFO Application startup complete.
2022-05-02 23:00:53,487, INFO Application startup complete.
2022-05-02 23:00:56,677, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 23:00:56,677, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 23:00:58,704, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 198
2022-05-02 23:00:58,704, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 198
2022-05-02 23:00:58,711, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 447, in test
    response = rsp['texts']
TypeError: 'Response' object is not subscriptable
2022-05-02 23:00:58,711, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 447, in test
    response = rsp['texts']
TypeError: 'Response' object is not subscriptable
2022-05-02 23:01:07,425, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-02 23:01:07,446, INFO Shutting down
2022-05-02 23:01:07,446, INFO Shutting down
2022-05-02 23:01:07,547, INFO Waiting for application shutdown.
2022-05-02 23:01:07,547, INFO Waiting for application shutdown.
2022-05-02 23:01:07,548, INFO Application shutdown complete.
2022-05-02 23:01:07,548, INFO Application shutdown complete.
2022-05-02 23:01:07,548, INFO Finished server process [3751417]
2022-05-02 23:01:07,548, INFO Finished server process [3751417]
2022-05-02 23:01:08,308, DEBUG Using selector: EpollSelector
2022-05-02 23:01:08,405, INFO Started server process [3751647]
2022-05-02 23:01:08,405, INFO Started server process [3751647]
2022-05-02 23:01:08,406, INFO Waiting for application startup.
2022-05-02 23:01:08,406, INFO Waiting for application startup.
2022-05-02 23:01:08,406, INFO Application startup complete.
2022-05-02 23:01:08,406, INFO Application startup complete.
2022-05-02 23:03:43,722, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 23:03:43,722, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 23:03:44,669, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 139
2022-05-02 23:03:44,669, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 139
2022-05-02 23:03:44,672, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 447, in test
    response = rsp['texts']
TypeError: 'Response' object is not subscriptable
2022-05-02 23:03:44,672, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 447, in test
    response = rsp['texts']
TypeError: 'Response' object is not subscriptable
2022-05-02 23:04:00,422, WARNING StatReload detected file change in 'dal.py'. Reloading...
2022-05-02 23:04:00,466, INFO Shutting down
2022-05-02 23:04:00,466, INFO Shutting down
2022-05-02 23:04:00,568, INFO Waiting for application shutdown.
2022-05-02 23:04:00,568, INFO Waiting for application shutdown.
2022-05-02 23:04:00,568, INFO Application shutdown complete.
2022-05-02 23:04:00,568, INFO Application shutdown complete.
2022-05-02 23:04:00,569, INFO Finished server process [3751647]
2022-05-02 23:04:00,569, INFO Finished server process [3751647]
2022-05-02 23:04:01,214, WARNING StatReload detected file change in 'dal.py'. Reloading...
2022-05-02 23:04:02,117, DEBUG Using selector: EpollSelector
2022-05-02 23:04:02,224, INFO Started server process [3754171]
2022-05-02 23:04:02,224, INFO Started server process [3754171]
2022-05-02 23:04:02,225, INFO Waiting for application startup.
2022-05-02 23:04:02,225, INFO Waiting for application startup.
2022-05-02 23:04:02,225, INFO Application startup complete.
2022-05-02 23:04:02,225, INFO Application startup complete.
2022-05-02 23:28:06,537, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-02 23:28:06,543, INFO Shutting down
2022-05-02 23:28:06,543, INFO Shutting down
2022-05-02 23:28:06,645, INFO Waiting for application shutdown.
2022-05-02 23:28:06,645, INFO Waiting for application shutdown.
2022-05-02 23:28:06,647, INFO Application shutdown complete.
2022-05-02 23:28:06,647, INFO Application shutdown complete.
2022-05-02 23:28:06,647, INFO Finished server process [3754171]
2022-05-02 23:28:06,647, INFO Finished server process [3754171]
2022-05-02 23:28:07,525, DEBUG Using selector: EpollSelector
2022-05-02 23:28:07,624, INFO Started server process [3771809]
2022-05-02 23:28:07,624, INFO Started server process [3771809]
2022-05-02 23:28:07,624, INFO Waiting for application startup.
2022-05-02 23:28:07,624, INFO Waiting for application startup.
2022-05-02 23:28:07,624, INFO Application startup complete.
2022-05-02 23:28:07,624, INFO Application startup complete.
2022-05-02 23:28:07,828, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-02 23:28:07,926, INFO Shutting down
2022-05-02 23:28:07,926, INFO Shutting down
2022-05-02 23:28:08,027, INFO Waiting for application shutdown.
2022-05-02 23:28:08,027, INFO Waiting for application shutdown.
2022-05-02 23:28:08,028, INFO Application shutdown complete.
2022-05-02 23:28:08,028, INFO Application shutdown complete.
2022-05-02 23:28:08,028, INFO Finished server process [3771809]
2022-05-02 23:28:08,028, INFO Finished server process [3771809]
2022-05-02 23:28:08,793, DEBUG Using selector: EpollSelector
2022-05-02 23:28:08,893, INFO Started server process [3771830]
2022-05-02 23:28:08,893, INFO Started server process [3771830]
2022-05-02 23:28:08,893, INFO Waiting for application startup.
2022-05-02 23:28:08,893, INFO Waiting for application startup.
2022-05-02 23:28:08,893, INFO Application startup complete.
2022-05-02 23:28:08,893, INFO Application startup complete.
2022-05-02 23:28:09,675, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-02 23:28:09,696, INFO Shutting down
2022-05-02 23:28:09,696, INFO Shutting down
2022-05-02 23:28:09,798, INFO Waiting for application shutdown.
2022-05-02 23:28:09,798, INFO Waiting for application shutdown.
2022-05-02 23:28:09,798, INFO Application shutdown complete.
2022-05-02 23:28:09,798, INFO Application shutdown complete.
2022-05-02 23:28:09,798, INFO Finished server process [3771830]
2022-05-02 23:28:09,798, INFO Finished server process [3771830]
2022-05-02 23:28:10,494, DEBUG Using selector: EpollSelector
2022-05-02 23:28:10,591, INFO Started server process [3771854]
2022-05-02 23:28:10,591, INFO Started server process [3771854]
2022-05-02 23:28:10,591, INFO Waiting for application startup.
2022-05-02 23:28:10,591, INFO Waiting for application startup.
2022-05-02 23:28:10,592, INFO Application startup complete.
2022-05-02 23:28:10,592, INFO Application startup complete.
2022-05-02 23:29:20,232, INFO Will watch for changes in these directories: ['/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a']
2022-05-02 23:29:20,232, INFO Uvicorn running on http://0.0.0.0:9090 (Press CTRL+C to quit)
2022-05-02 23:29:20,232, INFO Started reloader process [3772870] using statreload
2022-05-02 23:29:20,882, DEBUG Using selector: EpollSelector
2022-05-02 23:29:20,979, INFO Started server process [3772879]
2022-05-02 23:29:20,979, INFO Started server process [3772879]
2022-05-02 23:29:20,979, INFO Waiting for application startup.
2022-05-02 23:29:20,979, INFO Waiting for application startup.
2022-05-02 23:29:20,980, INFO Application startup complete.
2022-05-02 23:29:20,980, INFO Application startup complete.
2022-05-02 23:29:25,392, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 23:29:25,392, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 23:29:27,460, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 295
2022-05-02 23:29:27,460, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 295
2022-05-02 23:29:27,467, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 449, in test
    dialog_pairs.append(SPEAKER2 + response.strip('\\n'))
AttributeError: 'list' object has no attribute 'strip'
2022-05-02 23:29:27,467, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 449, in test
    dialog_pairs.append(SPEAKER2 + response.strip('\\n'))
AttributeError: 'list' object has no attribute 'strip'
2022-05-02 23:30:01,624, INFO Will watch for changes in these directories: ['/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a']
2022-05-02 23:30:01,624, ERROR [Errno 98] Address already in use
2022-05-02 23:30:04,541, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 23:30:04,541, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 23:30:06,593, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 285
2022-05-02 23:30:06,593, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 285
2022-05-02 23:30:06,596, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 449, in test
    dialog_pairs.append(SPEAKER2 + response.strip('\\n'))
AttributeError: 'list' object has no attribute 'strip'
2022-05-02 23:30:06,596, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 449, in test
    dialog_pairs.append(SPEAKER2 + response.strip('\\n'))
AttributeError: 'list' object has no attribute 'strip'
2022-05-02 23:30:31,959, INFO Will watch for changes in these directories: ['/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a']
2022-05-02 23:30:31,959, INFO Uvicorn running on http://0.0.0.0:9090 (Press CTRL+C to quit)
2022-05-02 23:30:31,959, INFO Started reloader process [3773869] using statreload
2022-05-02 23:30:32,607, DEBUG Using selector: EpollSelector
2022-05-02 23:30:32,705, INFO Started server process [3773881]
2022-05-02 23:30:32,705, INFO Started server process [3773881]
2022-05-02 23:30:32,706, INFO Waiting for application startup.
2022-05-02 23:30:32,706, INFO Waiting for application startup.
2022-05-02 23:30:32,706, INFO Application startup complete.
2022-05-02 23:30:32,706, INFO Application startup complete.
2022-05-02 23:30:34,540, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 23:30:34,540, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 23:30:35,513, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 112
2022-05-02 23:30:35,513, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 112
2022-05-02 23:30:35,517, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 453, in test
    if rsp.status_code ==200:
AttributeError: 'dict' object has no attribute 'status_code'
2022-05-02 23:30:35,517, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 453, in test
    if rsp.status_code ==200:
AttributeError: 'dict' object has no attribute 'status_code'
2022-05-02 23:31:05,652, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-02 23:31:05,745, INFO Shutting down
2022-05-02 23:31:05,745, INFO Shutting down
2022-05-02 23:31:05,846, INFO Waiting for application shutdown.
2022-05-02 23:31:05,846, INFO Waiting for application shutdown.
2022-05-02 23:31:05,847, INFO Application shutdown complete.
2022-05-02 23:31:05,847, INFO Application shutdown complete.
2022-05-02 23:31:05,847, INFO Finished server process [3773881]
2022-05-02 23:31:05,847, INFO Finished server process [3773881]
2022-05-02 23:31:06,613, DEBUG Using selector: EpollSelector
2022-05-02 23:31:06,711, INFO Started server process [3774342]
2022-05-02 23:31:06,711, INFO Started server process [3774342]
2022-05-02 23:31:06,711, INFO Waiting for application startup.
2022-05-02 23:31:06,711, INFO Waiting for application startup.
2022-05-02 23:31:06,712, INFO Application startup complete.
2022-05-02 23:31:06,712, INFO Application startup complete.
2022-05-02 23:31:32,171, INFO Will watch for changes in these directories: ['/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a']
2022-05-02 23:31:32,171, INFO Uvicorn running on http://0.0.0.0:9090 (Press CTRL+C to quit)
2022-05-02 23:31:32,172, INFO Started reloader process [3774719] using statreload
2022-05-02 23:31:32,813, DEBUG Using selector: EpollSelector
2022-05-02 23:31:32,907, INFO Started server process [3774731]
2022-05-02 23:31:32,907, INFO Started server process [3774731]
2022-05-02 23:31:32,907, INFO Waiting for application startup.
2022-05-02 23:31:32,907, INFO Waiting for application startup.
2022-05-02 23:31:32,907, INFO Application startup complete.
2022-05-02 23:31:32,907, INFO Application startup complete.
2022-05-02 23:31:34,766, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 23:31:34,766, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 23:31:36,837, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 217
2022-05-02 23:31:36,837, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 217
2022-05-02 23:31:51,997, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-02 23:31:52,088, INFO Shutting down
2022-05-02 23:31:52,088, INFO Shutting down
2022-05-02 23:31:52,189, INFO Waiting for application shutdown.
2022-05-02 23:31:52,189, INFO Waiting for application shutdown.
2022-05-02 23:31:52,189, INFO Application shutdown complete.
2022-05-02 23:31:52,189, INFO Application shutdown complete.
2022-05-02 23:31:52,190, INFO Finished server process [3774731]
2022-05-02 23:31:52,190, INFO Finished server process [3774731]
2022-05-02 23:31:52,976, DEBUG Using selector: EpollSelector
2022-05-02 23:31:53,073, INFO Started server process [3775020]
2022-05-02 23:31:53,073, INFO Started server process [3775020]
2022-05-02 23:31:53,073, INFO Waiting for application startup.
2022-05-02 23:31:53,073, INFO Waiting for application startup.
2022-05-02 23:31:53,073, INFO Application startup complete.
2022-05-02 23:31:53,073, INFO Application startup complete.
2022-05-02 23:32:29,695, INFO Will watch for changes in these directories: ['/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a']
2022-05-02 23:32:29,695, INFO Uvicorn running on http://0.0.0.0:9090 (Press CTRL+C to quit)
2022-05-02 23:32:29,695, INFO Started reloader process [3775557] using statreload
2022-05-02 23:32:30,392, DEBUG Using selector: EpollSelector
2022-05-02 23:32:30,488, INFO Started server process [3775566]
2022-05-02 23:32:30,488, INFO Started server process [3775566]
2022-05-02 23:32:30,488, INFO Waiting for application startup.
2022-05-02 23:32:30,488, INFO Waiting for application startup.
2022-05-02 23:32:30,488, INFO Application startup complete.
2022-05-02 23:32:30,488, INFO Application startup complete.
2022-05-02 23:32:40,921, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 23:32:40,921, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 23:32:42,968, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 333
2022-05-02 23:32:42,968, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 333
2022-05-02 23:33:16,044, WARNING StatReload detected file change in 'schemas/models.py'. Reloading...
2022-05-02 23:33:16,073, INFO Shutting down
2022-05-02 23:33:16,073, INFO Shutting down
2022-05-02 23:33:16,174, INFO Waiting for application shutdown.
2022-05-02 23:33:16,174, INFO Waiting for application shutdown.
2022-05-02 23:33:16,175, INFO Application shutdown complete.
2022-05-02 23:33:16,175, INFO Application shutdown complete.
2022-05-02 23:33:16,175, INFO Finished server process [3775566]
2022-05-02 23:33:16,175, INFO Finished server process [3775566]
2022-05-02 23:33:16,926, DEBUG Using selector: EpollSelector
2022-05-02 23:33:17,019, INFO Started server process [3776188]
2022-05-02 23:33:17,019, INFO Started server process [3776188]
2022-05-02 23:33:17,020, INFO Waiting for application startup.
2022-05-02 23:33:17,020, INFO Waiting for application startup.
2022-05-02 23:33:17,020, INFO Application startup complete.
2022-05-02 23:33:17,020, INFO Application startup complete.
2022-05-02 23:45:11,549, INFO for debug: This is a conversation between a boy named Bob and girl named Alice. Alice is a very kind and smart girl. She likes music, running, food, math and art. Alice is very talkative and likes to talk and share her experiences growing up. She's a Stanford psychology graduate with a knack for comforting people. The boy may fall in love with Alice

Bob: I'm boring
Alice: Yeah, being bored sucks. Let's do something fun together!
Bob: You are really good friends
Alice: That's very sweet to say!, You inspire me all the time!
Bob: hi
Alice: 
api_params: {'stop': '\nBob: ', 'temperature': 0.9, 'top_p': 0.9, 'max_tokens': 150, 'frequency_penalty': 0.0, 'presence_penalty': 0.6}
2022-05-02 23:45:11,549, INFO for debug: This is a conversation between a boy named Bob and girl named Alice. Alice is a very kind and smart girl. She likes music, running, food, math and art. Alice is very talkative and likes to talk and share her experiences growing up. She's a Stanford psychology graduate with a knack for comforting people. The boy may fall in love with Alice

Bob: I'm boring
Alice: Yeah, being bored sucks. Let's do something fun together!
Bob: You are really good friends
Alice: That's very sweet to say!, You inspire me all the time!
Bob: hi
Alice: 
api_params: {'stop': '\nBob: ', 'temperature': 0.9, 'top_p': 0.9, 'max_tokens': 150, 'frequency_penalty': 0.0, 'presence_penalty': 0.6}
2022-05-02 23:45:11,561, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 23:45:11,561, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-02 23:45:13,548, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 249
2022-05-02 23:45:13,548, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 249
2022-05-02 23:45:13,552, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 185, in send_message
    code, resp_msg = await chat_api(message.msg, current_userid, db)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/chat_bot_gpt3.py", line 139, in chat_api
    rsp = await engine.gen_replay(prompt)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/chat_bot_gpt3.py", line 129, in gen_replay
    rsp = await gpt3_api(prompt, self.api_params)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/chat_bot_gpt3.py", line 74, in gpt3_api
    logging.info('for debug: api result: %s', rsp.text)
AttributeError: 'dict' object has no attribute 'text'
2022-05-02 23:45:13,552, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 56, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/main.py", line 185, in send_message
    code, resp_msg = await chat_api(message.msg, current_userid, db)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/chat_bot_gpt3.py", line 139, in chat_api
    rsp = await engine.gen_replay(prompt)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/chat_bot_gpt3.py", line 129, in gen_replay
    rsp = await gpt3_api(prompt, self.api_params)
  File "/data1/work/light_chat-master-178e8304e82c480fe623514dbe954fd643b6ad4a/chat_bot_gpt3.py", line 74, in gpt3_api
    logging.info('for debug: api result: %s', rsp.text)
AttributeError: 'dict' object has no attribute 'text'
