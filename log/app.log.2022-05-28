2022-05-28 00:07:18,383, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 03:11:10,618, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 03:50:11,012, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 08:58:32,767, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 10:12:54,844, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 10:12:54,981, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 11:06:58,379, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 11:52:50,815, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 11:52:58,593, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 11:53:03,092, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserError: Pause on PRI/Upgrade
2022-05-28 12:06:14,420, INFO Started server process [511794]
2022-05-28 12:06:14,420, INFO Waiting for application startup.
2022-05-28 12:06:14,421, INFO Application startup complete.
2022-05-28 12:06:14,421, INFO Uvicorn running on http://0.0.0.0:9090 (Press CTRL+C to quit)
2022-05-28 14:19:52,914, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 14:20:03,447, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 14:43:23,213, INFO Started server process [736024]
2022-05-28 14:43:23,213, INFO Waiting for application startup.
2022-05-28 14:43:23,213, INFO Application startup complete.
2022-05-28 14:43:23,214, INFO Uvicorn running on http://0.0.0.0:9090 (Press CTRL+C to quit)
2022-05-28 14:43:26,330, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 14:43:31,814, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 402
2022-05-28 14:43:31,841, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 14:43:33,436, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 94
2022-05-28 14:43:53,939, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 14:43:58,244, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 321
2022-05-28 14:44:14,235, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 14:44:18,233, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 382
2022-05-28 14:48:44,136, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 14:48:45,506, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 137
2022-05-28 15:30:22,092, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 15:50:54,467, INFO Started server process [832569]
2022-05-28 15:50:54,467, INFO Waiting for application startup.
2022-05-28 15:50:54,468, INFO Application startup complete.
2022-05-28 15:50:54,468, INFO Uvicorn running on http://0.0.0.0:9090 (Press CTRL+C to quit)
2022-05-28 15:51:40,126, INFO Started server process [833818]
2022-05-28 15:51:40,126, INFO Waiting for application startup.
2022-05-28 15:51:40,127, INFO Application startup complete.
2022-05-28 15:51:40,127, INFO Uvicorn running on http://0.0.0.0:9090 (Press CTRL+C to quit)
2022-05-28 15:51:44,123, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 15:51:45,295, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 110
2022-05-28 15:52:42,160, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1819, in _execute_context
    self.dialect.do_execute(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 732, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such function: day

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/./main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/./main.py", line 336, in get_history_msg
    db_msg = db.query(models.Message).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(func.day(models.Message.create_time)).order_by(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2768, in all
    return self._iter().all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2903, in _iter
    result = self.session.execute(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1696, in execute
    result = conn._execute_20(statement, params or {}, execution_options)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1631, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 325, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1498, in _execute_clauseelement
    ret = self._execute_context(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1862, in _execute_context
    self._handle_dbapi_exception(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 2043, in _handle_dbapi_exception
    util.raise_(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1819, in _execute_context
    self.dialect.do_execute(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 732, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such function: day
[SQL: SELECT history_msgs.id AS history_msgs_id, history_msgs.content AS history_msgs_content, history_msgs."fromUserId" AS "history_msgs_fromUserId", history_msgs."toUserId" AS "history_msgs_toUserId", history_msgs.create_time AS history_msgs_create_time, history_msgs.visiable AS history_msgs_visiable, history_msgs.selfuser AS history_msgs_selfuser, history_msgs.evaluation AS history_msgs_evaluation 
FROM history_msgs 
WHERE history_msgs."fromUserId" = ? OR history_msgs."toUserId" = ? GROUP BY day(history_msgs.create_time) ORDER BY history_msgs.create_time DESC]
[parameters: (77757798343118848, 77757798343118848)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2022-05-28 15:58:40,230, INFO Will watch for changes in these directories: ['/data1/work/repos/light_chat']
2022-05-28 15:58:40,231, INFO Uvicorn running on http://0.0.0.0:9090 (Press CTRL+C to quit)
2022-05-28 15:58:40,231, INFO Started reloader process [844033] using statreload
2022-05-28 15:59:02,125, DEBUG Using selector: EpollSelector
2022-05-28 15:59:02,232, INFO Started server process [844619]
2022-05-28 15:59:02,232, INFO Started server process [844619]
2022-05-28 15:59:02,232, INFO Waiting for application startup.
2022-05-28 15:59:02,232, INFO Waiting for application startup.
2022-05-28 15:59:02,233, INFO Application startup complete.
2022-05-28 15:59:02,233, INFO Application startup complete.
2022-05-28 15:59:18,090, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg
    db_msg = db.query(models.Message).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(func.day(models.Message.create_time)).order_by(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2768, in all
    return self._iter().all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2903, in _iter
    result = self.session.execute(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1696, in execute
    result = conn._execute_20(statement, params or {}, execution_options)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1631, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 325, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1498, in _execute_clauseelement
    ret = self._execute_context(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1862, in _execute_context
    self._handle_dbapi_exception(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 2043, in _handle_dbapi_exception
    util.raise_(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1819, in _execute_context
    self.dialect.do_execute(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 732, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such function: day
[SQL: SELECT history_msgs.id AS history_msgs_id, history_msgs.content AS history_msgs_content, history_msgs."fromUserId" AS "history_msgs_fromUserId", history_msgs."toUserId" AS "history_msgs_toUserId", history_msgs.create_time AS history_msgs_create_time, history_msgs.visiable AS history_msgs_visiable, history_msgs.selfuser AS history_msgs_selfuser, history_msgs.evaluation AS history_msgs_evaluation 
FROM history_msgs 
WHERE history_msgs."fromUserId" = ? OR history_msgs."toUserId" = ? GROUP BY day(history_msgs.create_time) ORDER BY history_msgs.create_time DESC]
[parameters: (77757798343118848, 77757798343118848)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2022-05-28 15:59:18,090, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg
    db_msg = db.query(models.Message).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(func.day(models.Message.create_time)).order_by(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2768, in all
    return self._iter().all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2903, in _iter
    result = self.session.execute(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1696, in execute
    result = conn._execute_20(statement, params or {}, execution_options)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1631, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 325, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1498, in _execute_clauseelement
    ret = self._execute_context(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1862, in _execute_context
    self._handle_dbapi_exception(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 2043, in _handle_dbapi_exception
    util.raise_(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1819, in _execute_context
    self.dialect.do_execute(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 732, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such function: day
[SQL: SELECT history_msgs.id AS history_msgs_id, history_msgs.content AS history_msgs_content, history_msgs."fromUserId" AS "history_msgs_fromUserId", history_msgs."toUserId" AS "history_msgs_toUserId", history_msgs.create_time AS history_msgs_create_time, history_msgs.visiable AS history_msgs_visiable, history_msgs.selfuser AS history_msgs_selfuser, history_msgs.evaluation AS history_msgs_evaluation 
FROM history_msgs 
WHERE history_msgs."fromUserId" = ? OR history_msgs."toUserId" = ? GROUP BY day(history_msgs.create_time) ORDER BY history_msgs.create_time DESC]
[parameters: (77757798343118848, 77757798343118848)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2022-05-28 16:36:31,489, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-28 16:36:31,560, INFO Shutting down
2022-05-28 16:36:31,560, INFO Shutting down
2022-05-28 16:36:31,661, INFO Waiting for application shutdown.
2022-05-28 16:36:31,661, INFO Waiting for application shutdown.
2022-05-28 16:36:31,663, INFO Application shutdown complete.
2022-05-28 16:36:31,663, INFO Application shutdown complete.
2022-05-28 16:36:31,663, INFO Finished server process [844619]
2022-05-28 16:36:31,663, INFO Finished server process [844619]
2022-05-28 16:37:01,276, DEBUG Using selector: EpollSelector
2022-05-28 16:37:01,388, INFO Started server process [900310]
2022-05-28 16:37:01,388, INFO Started server process [900310]
2022-05-28 16:37:01,388, INFO Waiting for application startup.
2022-05-28 16:37:01,388, INFO Waiting for application startup.
2022-05-28 16:37:01,389, INFO Application startup complete.
2022-05-28 16:37:01,389, INFO Application startup complete.
2022-05-28 16:37:01,500, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 356, in get_history_msg_bydate
    msg_out = {
TypeError: unhashable type: 'SendMessageRes'
2022-05-28 16:37:01,500, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 356, in get_history_msg_bydate
    msg_out = {
TypeError: unhashable type: 'SendMessageRes'
2022-05-28 16:37:02,140, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 356, in get_history_msg_bydate
    msg_out = {
TypeError: unhashable type: 'SendMessageRes'
2022-05-28 16:37:02,140, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 356, in get_history_msg_bydate
    msg_out = {
TypeError: unhashable type: 'SendMessageRes'
2022-05-28 16:37:42,042, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 16:37:42,042, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 16:38:08,794, WARNING StatReload detected file change in 'schemas/models.py'. Reloading...
2022-05-28 16:38:08,891, INFO Shutting down
2022-05-28 16:38:08,891, INFO Shutting down
2022-05-28 16:38:08,992, INFO Waiting for application shutdown.
2022-05-28 16:38:08,992, INFO Waiting for application shutdown.
2022-05-28 16:38:08,992, INFO Application shutdown complete.
2022-05-28 16:38:08,992, INFO Application shutdown complete.
2022-05-28 16:38:08,993, INFO Finished server process [900310]
2022-05-28 16:38:08,993, INFO Finished server process [900310]
2022-05-28 16:39:16,946, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-28 16:41:50,701, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-28 19:00:48,526, INFO Will watch for changes in these directories: ['/data1/work/repos/light_chat']
2022-05-28 19:00:48,526, INFO Uvicorn running on http://0.0.0.0:9090 (Press CTRL+C to quit)
2022-05-28 19:00:48,526, INFO Started reloader process [1117451] using statreload
2022-05-28 19:01:19,390, DEBUG Using selector: EpollSelector
2022-05-28 19:01:19,579, INFO Started server process [1117798]
2022-05-28 19:01:19,579, INFO Started server process [1117798]
2022-05-28 19:01:19,580, INFO Waiting for application startup.
2022-05-28 19:01:19,580, INFO Waiting for application startup.
2022-05-28 19:01:19,580, INFO Application startup complete.
2022-05-28 19:01:19,580, INFO Application startup complete.
2022-05-28 19:01:39,092, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 383, in get_history_msg
    if msg.fromUserId == uid:
AttributeError: 'dict' object has no attribute 'fromUserId'
2022-05-28 19:01:39,092, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 383, in get_history_msg
    if msg.fromUserId == uid:
AttributeError: 'dict' object has no attribute 'fromUserId'
2022-05-28 19:02:36,286, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 339, in get_history_msg_bydate
    print(msg.__dict__)
AttributeError: Could not locate column in row for column '__dict__'
2022-05-28 19:02:36,286, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 339, in get_history_msg_bydate
    print(msg.__dict__)
AttributeError: Could not locate column in row for column '__dict__'
2022-05-28 19:02:47,242, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 383, in get_history_msg
    if msg.fromUserId == uid:
AttributeError: 'dict' object has no attribute 'fromUserId'
2022-05-28 19:02:47,242, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 383, in get_history_msg
    if msg.fromUserId == uid:
AttributeError: 'dict' object has no attribute 'fromUserId'
2022-05-28 19:02:47,810, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 383, in get_history_msg
    if msg.fromUserId == uid:
AttributeError: 'dict' object has no attribute 'fromUserId'
2022-05-28 19:02:47,810, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 383, in get_history_msg
    if msg.fromUserId == uid:
AttributeError: 'dict' object has no attribute 'fromUserId'
2022-05-28 19:04:05,592, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-28 19:04:05,686, INFO Shutting down
2022-05-28 19:04:05,686, INFO Shutting down
2022-05-28 19:04:05,787, INFO Waiting for application shutdown.
2022-05-28 19:04:05,787, INFO Waiting for application shutdown.
2022-05-28 19:04:05,788, INFO Application shutdown complete.
2022-05-28 19:04:05,788, INFO Application shutdown complete.
2022-05-28 19:04:05,789, INFO Finished server process [1117798]
2022-05-28 19:04:05,789, INFO Finished server process [1117798]
2022-05-28 19:04:17,187, DEBUG Using selector: EpollSelector
2022-05-28 19:04:17,299, INFO Started server process [1122487]
2022-05-28 19:04:17,299, INFO Started server process [1122487]
2022-05-28 19:04:17,299, INFO Waiting for application startup.
2022-05-28 19:04:17,299, INFO Waiting for application startup.
2022-05-28 19:04:17,299, INFO Application startup complete.
2022-05-28 19:04:17,299, INFO Application startup complete.
2022-05-28 19:08:58,391, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 339, in get_history_msg_bydate
    print(msg.__dict__)
AttributeError: Could not locate column in row for column '__dict__'
2022-05-28 19:08:58,391, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 339, in get_history_msg_bydate
    print(msg.__dict__)
AttributeError: Could not locate column in row for column '__dict__'
2022-05-28 19:10:16,802, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-28 19:10:16,852, INFO Shutting down
2022-05-28 19:10:16,852, INFO Shutting down
2022-05-28 19:10:16,954, INFO Waiting for application shutdown.
2022-05-28 19:10:16,954, INFO Waiting for application shutdown.
2022-05-28 19:10:16,954, INFO Application shutdown complete.
2022-05-28 19:10:16,954, INFO Application shutdown complete.
2022-05-28 19:10:16,955, INFO Finished server process [1122487]
2022-05-28 19:10:16,955, INFO Finished server process [1122487]
2022-05-28 19:10:28,247, DEBUG Using selector: EpollSelector
2022-05-28 19:10:28,361, INFO Started server process [1131637]
2022-05-28 19:10:28,361, INFO Started server process [1131637]
2022-05-28 19:10:28,361, INFO Waiting for application startup.
2022-05-28 19:10:28,361, INFO Waiting for application startup.
2022-05-28 19:10:28,362, INFO Application startup complete.
2022-05-28 19:10:28,362, INFO Application startup complete.
2022-05-28 19:10:34,150, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 342, in get_history_msg_bydate
    if msg.fromUserId == uid:
AttributeError: Could not locate column in row for column 'fromUserId'
2022-05-28 19:10:34,150, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 342, in get_history_msg_bydate
    if msg.fromUserId == uid:
AttributeError: Could not locate column in row for column 'fromUserId'
2022-05-28 19:17:26,388, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-28 19:17:26,402, INFO Shutting down
2022-05-28 19:17:26,402, INFO Shutting down
2022-05-28 19:17:26,503, INFO Waiting for application shutdown.
2022-05-28 19:17:26,503, INFO Waiting for application shutdown.
2022-05-28 19:17:26,504, INFO Application shutdown complete.
2022-05-28 19:17:26,504, INFO Application shutdown complete.
2022-05-28 19:17:26,504, INFO Finished server process [1131637]
2022-05-28 19:17:26,504, INFO Finished server process [1131637]
2022-05-28 19:17:38,039, DEBUG Using selector: EpollSelector
2022-05-28 19:17:38,149, INFO Started server process [1142062]
2022-05-28 19:17:38,149, INFO Started server process [1142062]
2022-05-28 19:17:38,150, INFO Waiting for application startup.
2022-05-28 19:17:38,150, INFO Waiting for application startup.
2022-05-28 19:17:38,150, INFO Application startup complete.
2022-05-28 19:17:38,150, INFO Application startup complete.
2022-05-28 19:18:38,913, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-28 19:18:38,969, INFO Shutting down
2022-05-28 19:18:38,969, INFO Shutting down
2022-05-28 19:18:39,070, INFO Waiting for application shutdown.
2022-05-28 19:18:39,070, INFO Waiting for application shutdown.
2022-05-28 19:18:39,071, INFO Application shutdown complete.
2022-05-28 19:18:39,071, INFO Application shutdown complete.
2022-05-28 19:18:39,071, INFO Finished server process [1142062]
2022-05-28 19:18:39,071, INFO Finished server process [1142062]
2022-05-28 19:19:10,507, DEBUG Using selector: EpollSelector
2022-05-28 19:19:10,614, INFO Started server process [1143869]
2022-05-28 19:19:10,614, INFO Started server process [1143869]
2022-05-28 19:19:10,614, INFO Waiting for application startup.
2022-05-28 19:19:10,614, INFO Waiting for application startup.
2022-05-28 19:19:10,614, INFO Application startup complete.
2022-05-28 19:19:10,614, INFO Application startup complete.
2022-05-28 19:19:58,955, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 342, in get_history_msg_bydate
    if msg.fromUserId == uid:
AttributeError: Could not locate column in row for column 'fromUserId'
2022-05-28 19:19:58,955, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 342, in get_history_msg_bydate
    if msg.fromUserId == uid:
AttributeError: Could not locate column in row for column 'fromUserId'
2022-05-28 19:20:53,108, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-28 19:20:53,120, INFO Shutting down
2022-05-28 19:20:53,120, INFO Shutting down
2022-05-28 19:20:53,221, INFO Waiting for application shutdown.
2022-05-28 19:20:53,221, INFO Waiting for application shutdown.
2022-05-28 19:20:53,222, INFO Application shutdown complete.
2022-05-28 19:20:53,222, INFO Application shutdown complete.
2022-05-28 19:20:53,222, INFO Finished server process [1143869]
2022-05-28 19:20:53,222, INFO Finished server process [1143869]
2022-05-28 19:21:14,542, DEBUG Using selector: EpollSelector
2022-05-28 19:21:14,676, INFO Started server process [1147160]
2022-05-28 19:21:14,676, INFO Started server process [1147160]
2022-05-28 19:21:14,676, INFO Waiting for application startup.
2022-05-28 19:21:14,676, INFO Waiting for application startup.
2022-05-28 19:21:14,677, INFO Application startup complete.
2022-05-28 19:21:14,677, INFO Application startup complete.
2022-05-28 19:21:33,913, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 342, in get_history_msg_bydate
    if msg['fromUserId'] == uid:
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/engine/result.py", line 72, in _key_fallback
    util.raise_(KeyError(key), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
KeyError: 'fromUserId'
2022-05-28 19:21:33,913, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 342, in get_history_msg_bydate
    if msg['fromUserId'] == uid:
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/engine/result.py", line 72, in _key_fallback
    util.raise_(KeyError(key), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
KeyError: 'fromUserId'
2022-05-28 19:24:18,950, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:24:18,950, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:24:21,706, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 252
2022-05-28 19:24:21,706, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 252
2022-05-28 19:24:21,718, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:24:21,718, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:24:23,569, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 165
2022-05-28 19:24:23,569, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 165
2022-05-28 19:29:42,222, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-28 19:29:42,281, INFO Shutting down
2022-05-28 19:29:42,281, INFO Shutting down
2022-05-28 19:29:42,382, INFO Waiting for application shutdown.
2022-05-28 19:29:42,382, INFO Waiting for application shutdown.
2022-05-28 19:29:42,383, INFO Application shutdown complete.
2022-05-28 19:29:42,383, INFO Application shutdown complete.
2022-05-28 19:29:42,383, INFO Finished server process [1147160]
2022-05-28 19:29:42,383, INFO Finished server process [1147160]
2022-05-28 19:30:13,870, DEBUG Using selector: EpollSelector
2022-05-28 19:30:14,048, INFO Started server process [1160078]
2022-05-28 19:30:14,048, INFO Started server process [1160078]
2022-05-28 19:30:14,048, INFO Waiting for application startup.
2022-05-28 19:30:14,048, INFO Waiting for application startup.
2022-05-28 19:30:14,049, INFO Application startup complete.
2022-05-28 19:30:14,049, INFO Application startup complete.
2022-05-28 19:30:14,056, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msg = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 19:30:14,056, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msg = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 19:37:08,598, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:37:08,598, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:37:11,361, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 225
2022-05-28 19:37:11,361, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 225
2022-05-28 19:37:11,375, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:37:11,375, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:37:14,120, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 247
2022-05-28 19:37:14,120, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 247
2022-05-28 19:37:14,126, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:37:14,126, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:37:16,726, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 210
2022-05-28 19:37:16,726, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 210
2022-05-28 19:39:45,115, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:39:45,115, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:39:47,910, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 269
2022-05-28 19:39:47,910, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 269
2022-05-28 19:39:47,916, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:39:47,916, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:39:50,647, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 240
2022-05-28 19:39:50,647, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 240
2022-05-28 19:39:50,653, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:39:50,653, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:39:51,794, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 119
2022-05-28 19:39:51,794, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 119
2022-05-28 19:40:58,249, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:40:58,249, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:41:01,033, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 242
2022-05-28 19:41:01,033, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 242
2022-05-28 19:41:01,038, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:41:01,038, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:41:01,834, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 110
2022-05-28 19:41:01,834, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 110
2022-05-28 19:41:59,354, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msg = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 19:41:59,354, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msg = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 19:42:31,300, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:42:31,300, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:42:32,945, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 98
2022-05-28 19:42:32,945, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 98
2022-05-28 19:43:28,388, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:43:28,388, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:43:31,230, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 191
2022-05-28 19:43:31,230, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 191
2022-05-28 19:48:05,677, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:48:05,677, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:48:08,452, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 247
2022-05-28 19:48:08,452, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 247
2022-05-28 19:48:08,458, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:48:08,458, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:48:11,208, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 246
2022-05-28 19:48:11,208, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 246
2022-05-28 19:48:11,213, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:48:11,213, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:48:12,886, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 92
2022-05-28 19:48:12,886, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 92
2022-05-28 19:49:25,554, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:49:25,554, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:49:28,338, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 95
2022-05-28 19:49:28,338, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 95
2022-05-28 19:49:39,333, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:49:39,333, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:49:42,139, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 121
2022-05-28 19:49:42,139, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 121
2022-05-28 19:51:15,272, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:51:15,272, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:51:18,126, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 245
2022-05-28 19:51:18,126, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 245
2022-05-28 19:51:18,132, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:51:18,132, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:51:20,055, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 124
2022-05-28 19:51:20,055, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 124
2022-05-28 19:51:46,230, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:51:46,230, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:51:49,001, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 256
2022-05-28 19:51:49,001, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 256
2022-05-28 19:51:49,007, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:51:49,007, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:51:51,734, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 288
2022-05-28 19:51:51,734, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 288
2022-05-28 19:51:51,739, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:51:51,739, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:51:53,267, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 165
2022-05-28 19:51:53,267, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 165
2022-05-28 19:52:20,846, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:52:20,846, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:52:21,700, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 101
2022-05-28 19:52:21,700, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 101
2022-05-28 19:54:08,285, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:54:08,285, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:54:11,080, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 237
2022-05-28 19:54:11,080, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 237
2022-05-28 19:54:11,086, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:54:11,086, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:54:13,785, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 225
2022-05-28 19:54:13,785, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 225
2022-05-28 19:54:13,790, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:54:13,790, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:54:16,507, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 161
2022-05-28 19:54:16,507, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 161
2022-05-28 19:55:23,396, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:55:23,396, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 19:55:26,249, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 233
2022-05-28 19:55:26,249, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 233
2022-05-28 20:01:57,680, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:01:57,680, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:02:00,472, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 98
2022-05-28 20:02:00,472, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 98
2022-05-28 20:02:38,680, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:02:38,680, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:02:41,458, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:02:41,458, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:03:57,537, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:03:57,537, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:03:59,549, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:03:59,549, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:04:07,394, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msg = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 20:04:07,394, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msg = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 20:04:40,437, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:04:40,437, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:04:40,657, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:04:40,657, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:05:45,969, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:05:45,969, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:05:48,758, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 72
2022-05-28 20:05:48,758, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 72
2022-05-28 20:17:41,951, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:17:41,951, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:17:44,740, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 237
2022-05-28 20:17:44,740, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 237
2022-05-28 20:17:44,747, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:17:44,747, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:17:47,488, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 184
2022-05-28 20:17:47,488, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 184
2022-05-28 20:18:28,914, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:18:28,914, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:18:30,883, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 101
2022-05-28 20:18:30,883, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 101
2022-05-28 20:19:00,419, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:19:00,419, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:19:03,193, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 65
2022-05-28 20:19:03,193, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 65
2022-05-28 20:20:48,906, WARNING StatReload detected file change in 'db/models.py'. Reloading...
2022-05-28 20:20:48,991, INFO Shutting down
2022-05-28 20:20:48,991, INFO Shutting down
2022-05-28 20:20:49,093, INFO Waiting for application shutdown.
2022-05-28 20:20:49,093, INFO Waiting for application shutdown.
2022-05-28 20:20:49,094, INFO Application shutdown complete.
2022-05-28 20:20:49,094, INFO Application shutdown complete.
2022-05-28 20:20:49,095, INFO Finished server process [1160078]
2022-05-28 20:20:49,095, INFO Finished server process [1160078]
2022-05-28 20:21:00,402, DEBUG Using selector: EpollSelector
2022-05-28 20:21:00,512, INFO Started server process [1233131]
2022-05-28 20:21:00,512, INFO Started server process [1233131]
2022-05-28 20:21:00,512, INFO Waiting for application startup.
2022-05-28 20:21:00,512, INFO Waiting for application startup.
2022-05-28 20:21:00,512, INFO Application startup complete.
2022-05-28 20:21:00,512, INFO Application startup complete.
2022-05-28 20:23:58,720, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:23:58,720, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:24:01,477, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 235
2022-05-28 20:24:01,477, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 235
2022-05-28 20:24:01,487, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:24:01,487, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:24:04,192, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 262
2022-05-28 20:24:04,192, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 262
2022-05-28 20:24:04,199, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:24:04,199, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:24:06,897, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 253
2022-05-28 20:24:06,897, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 253
2022-05-28 20:24:06,903, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:24:06,903, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:24:09,608, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 271
2022-05-28 20:24:09,608, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 271
2022-05-28 20:24:09,613, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:24:09,613, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:24:12,313, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 122
2022-05-28 20:24:12,313, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 122
2022-05-28 20:31:36,406, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:31:36,406, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:31:39,204, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 248
2022-05-28 20:31:39,204, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 248
2022-05-28 20:31:39,210, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:31:39,210, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:31:41,938, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:31:41,938, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:34:44,856, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-28 20:34:44,889, INFO Shutting down
2022-05-28 20:34:44,889, INFO Shutting down
2022-05-28 20:34:44,990, INFO Waiting for application shutdown.
2022-05-28 20:34:44,990, INFO Waiting for application shutdown.
2022-05-28 20:34:44,991, INFO Application shutdown complete.
2022-05-28 20:34:44,991, INFO Application shutdown complete.
2022-05-28 20:34:44,991, INFO Finished server process [1233131]
2022-05-28 20:34:44,991, INFO Finished server process [1233131]
2022-05-28 20:34:56,386, DEBUG Using selector: EpollSelector
2022-05-28 20:34:56,500, INFO Started server process [1252748]
2022-05-28 20:34:56,500, INFO Started server process [1252748]
2022-05-28 20:34:56,501, INFO Waiting for application startup.
2022-05-28 20:34:56,501, INFO Waiting for application startup.
2022-05-28 20:34:56,501, INFO Application startup complete.
2022-05-28 20:34:56,501, INFO Application startup complete.
2022-05-28 20:35:14,109, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:35:14,109, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:35:16,907, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:35:16,907, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:35:20,762, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msg = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 20:35:20,762, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msg = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 20:35:31,832, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:35:31,832, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:35:34,589, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:35:34,589, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:36:54,583, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-28 20:36:54,670, INFO Shutting down
2022-05-28 20:36:54,670, INFO Shutting down
2022-05-28 20:36:54,771, INFO Waiting for application shutdown.
2022-05-28 20:36:54,771, INFO Waiting for application shutdown.
2022-05-28 20:36:54,772, INFO Application shutdown complete.
2022-05-28 20:36:54,772, INFO Application shutdown complete.
2022-05-28 20:36:54,773, INFO Finished server process [1252748]
2022-05-28 20:36:54,773, INFO Finished server process [1252748]
2022-05-28 20:37:06,094, DEBUG Using selector: EpollSelector
2022-05-28 20:37:06,207, INFO Started server process [1255933]
2022-05-28 20:37:06,207, INFO Started server process [1255933]
2022-05-28 20:37:06,208, INFO Waiting for application startup.
2022-05-28 20:37:06,208, INFO Waiting for application startup.
2022-05-28 20:37:06,208, INFO Application startup complete.
2022-05-28 20:37:06,208, INFO Application startup complete.
2022-05-28 20:37:06,281, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msg = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 20:37:06,281, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msg = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 20:38:30,538, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-28 20:38:30,627, INFO Shutting down
2022-05-28 20:38:30,627, INFO Shutting down
2022-05-28 20:38:30,729, INFO Waiting for application shutdown.
2022-05-28 20:38:30,729, INFO Waiting for application shutdown.
2022-05-28 20:38:30,729, INFO Application shutdown complete.
2022-05-28 20:38:30,729, INFO Application shutdown complete.
2022-05-28 20:38:30,730, INFO Finished server process [1255933]
2022-05-28 20:38:30,730, INFO Finished server process [1255933]
2022-05-28 20:38:52,117, DEBUG Using selector: EpollSelector
2022-05-28 20:38:52,230, INFO Started server process [1258227]
2022-05-28 20:38:52,230, INFO Started server process [1258227]
2022-05-28 20:38:52,231, INFO Waiting for application startup.
2022-05-28 20:38:52,231, INFO Waiting for application startup.
2022-05-28 20:38:52,231, INFO Application startup complete.
2022-05-28 20:38:52,231, INFO Application startup complete.
2022-05-28 20:38:52,316, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:38:52,316, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:38:53,096, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 65
2022-05-28 20:38:53,096, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 65
2022-05-28 20:38:53,180, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:38:53,180, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:38:55,972, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 258
2022-05-28 20:38:55,972, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 258
2022-05-28 20:38:55,978, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:38:55,978, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:38:58,819, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 266
2022-05-28 20:38:58,819, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 266
2022-05-28 20:38:58,825, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:38:58,825, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:39:01,645, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 255
2022-05-28 20:39:01,645, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 255
2022-05-28 20:39:01,651, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:39:01,651, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:39:03,881, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 200
2022-05-28 20:39:03,881, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 200
2022-05-28 20:39:03,964, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msg = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 20:39:03,964, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msg = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 20:39:26,839, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:39:26,839, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:39:27,485, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:39:27,485, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:39:39,544, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:39:39,544, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:39:42,396, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 173
2022-05-28 20:39:42,396, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 173
2022-05-28 20:39:42,403, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:39:42,403, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:39:42,603, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:39:42,603, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:39:54,545, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-28 20:39:54,631, INFO Shutting down
2022-05-28 20:39:54,631, INFO Shutting down
2022-05-28 20:39:54,732, INFO Waiting for application shutdown.
2022-05-28 20:39:54,732, INFO Waiting for application shutdown.
2022-05-28 20:39:54,733, INFO Application shutdown complete.
2022-05-28 20:39:54,733, INFO Application shutdown complete.
2022-05-28 20:39:54,734, INFO Finished server process [1258227]
2022-05-28 20:39:54,734, INFO Finished server process [1258227]
2022-05-28 20:40:16,048, DEBUG Using selector: EpollSelector
2022-05-28 20:40:16,162, INFO Started server process [1260312]
2022-05-28 20:40:16,162, INFO Started server process [1260312]
2022-05-28 20:40:16,163, INFO Waiting for application startup.
2022-05-28 20:40:16,163, INFO Waiting for application startup.
2022-05-28 20:40:16,163, INFO Application startup complete.
2022-05-28 20:40:16,163, INFO Application startup complete.
2022-05-28 20:40:33,474, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-28 20:40:33,536, INFO Shutting down
2022-05-28 20:40:33,536, INFO Shutting down
2022-05-28 20:40:33,637, INFO Waiting for application shutdown.
2022-05-28 20:40:33,637, INFO Waiting for application shutdown.
2022-05-28 20:40:33,638, INFO Application shutdown complete.
2022-05-28 20:40:33,638, INFO Application shutdown complete.
2022-05-28 20:40:33,638, INFO Finished server process [1260312]
2022-05-28 20:40:33,638, INFO Finished server process [1260312]
2022-05-28 20:40:50,058, DEBUG Using selector: EpollSelector
2022-05-28 20:40:50,167, INFO Started server process [1261291]
2022-05-28 20:40:50,167, INFO Started server process [1261291]
2022-05-28 20:40:50,167, INFO Waiting for application startup.
2022-05-28 20:40:50,167, INFO Waiting for application startup.
2022-05-28 20:40:50,167, INFO Application startup complete.
2022-05-28 20:40:50,167, INFO Application startup complete.
2022-05-28 20:41:02,262, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:41:02,262, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:41:05,030, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 172
2022-05-28 20:41:05,030, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 172
2022-05-28 20:41:05,040, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:41:05,040, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:41:07,770, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:41:07,770, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:41:08,326, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:41:08,326, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:41:11,059, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 172
2022-05-28 20:41:11,059, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 172
2022-05-28 20:41:11,063, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:41:11,063, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:41:13,796, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 173
2022-05-28 20:41:13,796, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 173
2022-05-28 20:41:13,801, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:41:13,801, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:41:16,534, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:41:16,534, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:41:16,617, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msg = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 20:41:16,617, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msg = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 20:41:26,732, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:41:26,732, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:41:27,441, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:41:27,441, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:42:40,253, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-28 20:42:40,302, INFO Shutting down
2022-05-28 20:42:40,302, INFO Shutting down
2022-05-28 20:42:40,403, INFO Waiting for application shutdown.
2022-05-28 20:42:40,403, INFO Waiting for application shutdown.
2022-05-28 20:42:40,404, INFO Application shutdown complete.
2022-05-28 20:42:40,404, INFO Application shutdown complete.
2022-05-28 20:42:40,404, INFO Finished server process [1261291]
2022-05-28 20:42:40,404, INFO Finished server process [1261291]
2022-05-28 20:43:01,702, DEBUG Using selector: EpollSelector
2022-05-28 20:43:01,814, INFO Started server process [1264364]
2022-05-28 20:43:01,814, INFO Started server process [1264364]
2022-05-28 20:43:01,815, INFO Waiting for application startup.
2022-05-28 20:43:01,815, INFO Waiting for application startup.
2022-05-28 20:43:01,815, INFO Application startup complete.
2022-05-28 20:43:01,815, INFO Application startup complete.
2022-05-28 20:43:08,671, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msg = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 20:43:08,671, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msg = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 20:45:10,322, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-28 20:45:10,351, INFO Shutting down
2022-05-28 20:45:10,351, INFO Shutting down
2022-05-28 20:45:10,452, INFO Waiting for application shutdown.
2022-05-28 20:45:10,452, INFO Waiting for application shutdown.
2022-05-28 20:45:10,452, INFO Application shutdown complete.
2022-05-28 20:45:10,452, INFO Application shutdown complete.
2022-05-28 20:45:10,453, INFO Finished server process [1264364]
2022-05-28 20:45:10,453, INFO Finished server process [1264364]
2022-05-28 20:45:31,880, DEBUG Using selector: EpollSelector
2022-05-28 20:45:31,995, INFO Started server process [1268332]
2022-05-28 20:45:31,995, INFO Started server process [1268332]
2022-05-28 20:45:31,995, INFO Waiting for application startup.
2022-05-28 20:45:31,995, INFO Waiting for application startup.
2022-05-28 20:45:31,995, INFO Application startup complete.
2022-05-28 20:45:31,995, INFO Application startup complete.
2022-05-28 20:45:32,098, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msg = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 20:45:32,098, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msg = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 20:46:03,932, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:46:03,932, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:46:06,756, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:46:06,756, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:48:49,845, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:48:49,845, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:48:52,638, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 173
2022-05-28 20:48:52,638, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 173
2022-05-28 20:48:52,644, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:48:52,644, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:48:55,388, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:48:55,388, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:49:47,308, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:49:47,308, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:49:49,263, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:49:49,263, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:50:00,009, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-28 20:50:00,083, INFO Shutting down
2022-05-28 20:50:00,083, INFO Shutting down
2022-05-28 20:50:00,184, INFO Waiting for application shutdown.
2022-05-28 20:50:00,184, INFO Waiting for application shutdown.
2022-05-28 20:50:00,185, INFO Application shutdown complete.
2022-05-28 20:50:00,185, INFO Application shutdown complete.
2022-05-28 20:50:00,186, INFO Finished server process [1268332]
2022-05-28 20:50:00,186, INFO Finished server process [1268332]
2022-05-28 20:50:21,657, DEBUG Using selector: EpollSelector
2022-05-28 20:50:21,767, INFO Started server process [1275778]
2022-05-28 20:50:21,767, INFO Started server process [1275778]
2022-05-28 20:50:21,768, INFO Waiting for application startup.
2022-05-28 20:50:21,768, INFO Waiting for application startup.
2022-05-28 20:50:21,768, INFO Application startup complete.
2022-05-28 20:50:21,768, INFO Application startup complete.
2022-05-28 20:50:22,662, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:50:22,662, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:50:25,518, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 67
2022-05-28 20:50:25,518, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 67
2022-05-28 20:51:49,708, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-28 20:51:49,731, INFO Shutting down
2022-05-28 20:51:49,731, INFO Shutting down
2022-05-28 20:51:49,832, INFO Waiting for application shutdown.
2022-05-28 20:51:49,832, INFO Waiting for application shutdown.
2022-05-28 20:51:49,833, INFO Application shutdown complete.
2022-05-28 20:51:49,833, INFO Application shutdown complete.
2022-05-28 20:51:49,833, INFO Finished server process [1275778]
2022-05-28 20:51:49,833, INFO Finished server process [1275778]
2022-05-28 20:51:51,275, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-28 20:52:02,580, DEBUG Using selector: EpollSelector
2022-05-28 20:52:02,701, INFO Started server process [1278570]
2022-05-28 20:52:02,701, INFO Started server process [1278570]
2022-05-28 20:52:02,701, INFO Waiting for application startup.
2022-05-28 20:52:02,701, INFO Waiting for application startup.
2022-05-28 20:52:02,702, INFO Application startup complete.
2022-05-28 20:52:02,702, INFO Application startup complete.
2022-05-28 20:52:02,785, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:52:02,785, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:52:04,308, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:52:04,308, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:52:07,713, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msg = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 20:52:07,713, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msg = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 20:52:36,633, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:52:36,633, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:52:37,536, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 99
2022-05-28 20:52:37,536, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 99
2022-05-28 20:57:46,820, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:57:46,820, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:57:49,618, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:57:49,618, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:58:21,070, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:58:21,070, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:58:23,863, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 173
2022-05-28 20:58:23,863, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 173
2022-05-28 20:58:23,868, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:58:23,868, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:58:26,609, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:58:26,609, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:59:18,526, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:59:18,526, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:59:21,408, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 162
2022-05-28 20:59:21,408, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 162
2022-05-28 20:59:21,412, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:59:21,412, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 20:59:22,086, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 20:59:22,086, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:01:36,204, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:01:36,204, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:01:39,585, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 137
2022-05-28 21:01:39,585, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 137
2022-05-28 21:03:28,369, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:03:28,369, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:03:31,146, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 264
2022-05-28 21:03:31,146, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 264
2022-05-28 21:03:31,154, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:03:31,154, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:03:33,879, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:03:33,879, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:04:07,827, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:04:07,827, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:04:10,632, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 173
2022-05-28 21:04:10,632, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 173
2022-05-28 21:04:10,639, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:04:10,639, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:04:13,395, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:04:13,395, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:04:50,592, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:04:50,592, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:04:53,509, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:04:53,509, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:06:01,483, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:06:01,483, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:06:03,626, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:06:03,626, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:06:17,316, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:06:17,316, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:06:17,956, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:06:17,956, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:07:01,721, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:07:01,721, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:07:03,141, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:07:03,141, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:07:38,796, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:07:38,796, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:07:41,741, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 226
2022-05-28 21:07:41,741, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 226
2022-05-28 21:07:41,847, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:07:41,847, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:07:44,741, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 258
2022-05-28 21:07:44,741, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 258
2022-05-28 21:07:44,744, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:07:44,744, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:07:47,635, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 65
2022-05-28 21:07:47,635, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 65
2022-05-28 21:07:47,723, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:07:47,723, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:07:50,670, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 173
2022-05-28 21:07:50,670, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 173
2022-05-28 21:07:50,673, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:07:50,673, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:07:51,794, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:07:51,794, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:07:51,880, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:07:51,880, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:07:54,761, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 65
2022-05-28 21:07:54,761, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 65
2022-05-28 21:07:54,837, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:07:54,837, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:07:57,737, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 65
2022-05-28 21:07:57,737, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 65
2022-05-28 21:07:58,585, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:07:58,585, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:08:01,561, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 250
2022-05-28 21:08:01,561, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 250
2022-05-28 21:08:01,564, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:08:01,564, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:08:04,472, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 200
2022-05-28 21:08:04,472, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 200
2022-05-28 21:08:04,477, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:08:04,477, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:08:04,966, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 68
2022-05-28 21:08:04,966, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 68
2022-05-28 21:09:18,110, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-28 21:09:18,200, INFO Shutting down
2022-05-28 21:09:18,200, INFO Shutting down
2022-05-28 21:09:18,302, INFO Waiting for application shutdown.
2022-05-28 21:09:18,302, INFO Waiting for application shutdown.
2022-05-28 21:09:18,303, INFO Application shutdown complete.
2022-05-28 21:09:18,303, INFO Application shutdown complete.
2022-05-28 21:09:18,303, INFO Finished server process [1278570]
2022-05-28 21:09:18,303, INFO Finished server process [1278570]
2022-05-28 21:09:40,202, DEBUG Using selector: EpollSelector
2022-05-28 21:09:40,321, INFO Started server process [1303162]
2022-05-28 21:09:40,321, INFO Started server process [1303162]
2022-05-28 21:09:40,321, INFO Waiting for application startup.
2022-05-28 21:09:40,321, INFO Waiting for application startup.
2022-05-28 21:09:40,322, INFO Application startup complete.
2022-05-28 21:09:40,322, INFO Application startup complete.
2022-05-28 21:11:23,271, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msgs = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 21:11:23,271, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msgs = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 21:14:18,841, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 21:14:18,841, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 21:19:17,810, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:19:17,810, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:19:18,717, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:19:18,717, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:23:14,955, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:23:14,955, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:23:17,616, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 65
2022-05-28 21:23:17,616, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 65
2022-05-28 21:25:14,316, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:25:14,316, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:25:15,488, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:25:15,488, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:26:06,337, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:26:06,337, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:26:09,071, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:26:09,071, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:27:57,623, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:27:57,623, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:27:58,701, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:27:58,701, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 64
2022-05-28 21:34:26,074, WARNING StatReload detected file change in 'main.py'. Reloading...
2022-05-28 21:34:26,144, INFO Shutting down
2022-05-28 21:34:26,144, INFO Shutting down
2022-05-28 21:34:26,245, INFO Waiting for application shutdown.
2022-05-28 21:34:26,245, INFO Waiting for application shutdown.
2022-05-28 21:34:26,246, INFO Application shutdown complete.
2022-05-28 21:34:26,246, INFO Application shutdown complete.
2022-05-28 21:34:26,247, INFO Finished server process [1303162]
2022-05-28 21:34:26,247, INFO Finished server process [1303162]
2022-05-28 21:34:39,207, DEBUG Using selector: EpollSelector
2022-05-28 21:34:39,322, INFO Started server process [1334727]
2022-05-28 21:34:39,322, INFO Started server process [1334727]
2022-05-28 21:34:39,322, INFO Waiting for application startup.
2022-05-28 21:34:39,322, INFO Waiting for application startup.
2022-05-28 21:34:39,322, INFO Application startup complete.
2022-05-28 21:34:39,322, INFO Application startup complete.
2022-05-28 21:34:47,643, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msgs = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 21:34:47,643, ERROR Exception in ASGI application
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 96, in __call__
    raise exc from None
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 93, in __call__
    await self.app(scope, receive, inner_send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/data1/work/repos/light_chat/main.py", line 60, in db_session_middleware
    response = await call_next(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/to_thread.py", line 28, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(func, *args, cancellable=cancellable,
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 818, in run_sync_in_worker_thread
    return await future
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 754, in run
    result = context.run(func, *args)
  File "/data1/work/repos/light_chat/main.py", line 336, in get_history_msg_bydate
    db_msgs = db.query(models.Message.create_time, func.group_concat(models.Message).label('msgs')).filter(or_(models.Message.fromUserId == uid, models.Message.toUserId == uid)).group_by(models.Message.create_time).all()
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 845, in __call__
    return Function(
  File "<string>", line 2, in __init__
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 309, in warned
    return fn(*args, **kwargs)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 934, in __init__
    FunctionElement.__init__(self, *clauses, **kw)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 114, in __init__
    args = [
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 115, in <listcomp>
    coercions.expect(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 188, in expect
    resolved = impl._literal_coercion(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 498, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 510, in _raise_for_expected
    return super(ExpressionElementImpl, self)._raise_for_expected(
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py", line 283, in _raise_for_expected
    util.raise_(exc.ArgumentError(msg, code=code), replace_context=err)
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
sqlalchemy.exc.ArgumentError: SQL expression element expected, got <class 'db.models.Message'>.
2022-05-28 21:35:54,883, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:35:54,883, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:35:57,515, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 265
2022-05-28 21:35:57,515, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 265
2022-05-28 21:35:57,528, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:35:57,528, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:35:59,242, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 98
2022-05-28 21:35:59,242, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 98
2022-05-28 21:37:05,659, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:37:05,659, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:37:08,356, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 72
2022-05-28 21:37:08,356, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 72
2022-05-28 21:40:05,791, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:40:05,791, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:40:08,402, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 216
2022-05-28 21:40:08,402, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 216
2022-05-28 21:40:08,409, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:40:08,409, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:40:10,986, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 217
2022-05-28 21:40:10,986, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 217
2022-05-28 21:40:10,992, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:40:10,992, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:40:13,566, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 242
2022-05-28 21:40:13,566, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 242
2022-05-28 21:40:13,573, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:40:13,573, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:40:16,137, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 129
2022-05-28 21:40:16,137, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 129
2022-05-28 21:40:21,371, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:40:21,371, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:40:23,852, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 237
2022-05-28 21:40:23,852, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 237
2022-05-28 21:42:42,442, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:42:42,442, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:42:45,062, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 239
2022-05-28 21:42:45,062, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 239
2022-05-28 21:42:45,068, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:42:45,068, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:42:47,633, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 212
2022-05-28 21:42:47,633, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 212
2022-05-28 21:42:47,639, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:42:47,639, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:42:50,193, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 126
2022-05-28 21:42:50,193, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 126
2022-05-28 21:43:07,367, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:43:07,367, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:43:10,001, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 204
2022-05-28 21:43:10,001, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 204
2022-05-28 21:43:10,007, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:43:10,007, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:43:12,589, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 188
2022-05-28 21:43:12,589, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 188
2022-05-28 21:43:12,594, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:43:12,594, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:43:15,182, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 204
2022-05-28 21:43:15,182, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 204
2022-05-28 21:44:44,581, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:44:44,581, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:44:47,211, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 250
2022-05-28 21:44:47,211, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 250
2022-05-28 21:44:47,217, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:44:47,217, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:44:49,833, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 261
2022-05-28 21:44:49,833, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 261
2022-05-28 21:44:49,837, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:44:49,837, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:44:52,157, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 231
2022-05-28 21:44:52,157, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 231
2022-05-28 21:45:28,700, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:45:28,700, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:45:31,287, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 237
2022-05-28 21:45:31,287, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 237
2022-05-28 21:45:31,293, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:45:31,293, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:45:32,290, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 125
2022-05-28 21:45:32,290, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 125
2022-05-28 21:46:46,862, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 21:46:46,862, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 21:47:04,809, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:47:04,809, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:47:07,417, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 256
2022-05-28 21:47:07,417, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 256
2022-05-28 21:47:07,422, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:47:07,422, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:47:09,965, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 256
2022-05-28 21:47:09,965, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 256
2022-05-28 21:47:09,969, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:47:09,969, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:47:12,410, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 211
2022-05-28 21:47:12,410, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 211
2022-05-28 21:47:12,503, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 21:47:12,503, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 21:47:41,761, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 21:47:41,761, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 21:48:22,130, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 21:48:22,130, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 21:48:40,178, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 21:48:40,178, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 21:50:24,059, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:50:24,059, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:50:26,666, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 145
2022-05-28 21:50:26,666, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 145
2022-05-28 21:53:35,078, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:53:35,078, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:53:36,656, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 155
2022-05-28 21:53:36,656, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 155
2022-05-28 21:53:51,127, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 21:53:51,127, WARNING Invalid HTTP request received.
Traceback (most recent call last):
  File "/data1/work/.conda/envs/nlp/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 124, in data_received
    self.parser.feed_data(data)
  File "httptools/parser/parser.pyx", line 212, in httptools.parser.parser.HttpParser.feed_data
httptools.parser.errors.HttpParserInvalidMethodError: Invalid method encountered
2022-05-28 21:56:08,998, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:08,998, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:11,603, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 280
2022-05-28 21:56:11,603, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 280
2022-05-28 21:56:11,609, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:11,609, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:14,158, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 256
2022-05-28 21:56:14,158, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 256
2022-05-28 21:56:14,163, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:14,163, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:16,710, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 265
2022-05-28 21:56:16,710, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 265
2022-05-28 21:56:16,715, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:16,715, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:19,265, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 249
2022-05-28 21:56:19,265, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 249
2022-05-28 21:56:19,270, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:19,270, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:21,814, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 262
2022-05-28 21:56:21,814, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 262
2022-05-28 21:56:21,819, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:21,819, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:23,750, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 167
2022-05-28 21:56:23,750, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 167
2022-05-28 21:56:32,342, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:32,342, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:34,939, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 272
2022-05-28 21:56:34,939, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 272
2022-05-28 21:56:34,942, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:34,942, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:37,519, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 245
2022-05-28 21:56:37,519, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 245
2022-05-28 21:56:37,524, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:37,524, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:40,080, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 262
2022-05-28 21:56:40,080, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 262
2022-05-28 21:56:40,084, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:40,084, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:42,649, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 272
2022-05-28 21:56:42,649, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 272
2022-05-28 21:56:42,655, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:42,655, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:45,214, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 261
2022-05-28 21:56:45,214, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 261
2022-05-28 21:56:45,219, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:45,219, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:47,773, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 269
2022-05-28 21:56:47,773, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 269
2022-05-28 21:56:47,778, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:47,778, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:56:49,953, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 217
2022-05-28 21:56:49,953, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 217
2022-05-28 21:57:28,698, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:57:28,698, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:57:31,298, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 95
2022-05-28 21:57:31,298, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 95
2022-05-28 21:58:33,400, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:58:33,400, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:58:36,019, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 225
2022-05-28 21:58:36,019, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 225
2022-05-28 21:58:36,025, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:58:36,025, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 21:58:38,210, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 99
2022-05-28 21:58:38,210, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 99
2022-05-28 22:00:29,482, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:00:29,482, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:00:30,361, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 95
2022-05-28 22:00:30,361, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 95
2022-05-28 22:00:52,279, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:00:52,279, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:00:52,968, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 96
2022-05-28 22:00:52,968, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 96
2022-05-28 22:01:17,162, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:17,162, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:19,796, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 237
2022-05-28 22:01:19,796, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 237
2022-05-28 22:01:19,801, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:19,801, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:22,359, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 237
2022-05-28 22:01:22,359, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 237
2022-05-28 22:01:22,364, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:22,364, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:24,947, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 268
2022-05-28 22:01:24,947, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 268
2022-05-28 22:01:24,952, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:24,952, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:27,518, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 242
2022-05-28 22:01:27,518, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 242
2022-05-28 22:01:27,523, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:27,523, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:30,101, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 255
2022-05-28 22:01:30,101, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 255
2022-05-28 22:01:30,107, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:30,107, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:32,683, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 271
2022-05-28 22:01:32,683, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 271
2022-05-28 22:01:32,689, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:32,689, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:35,235, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 202
2022-05-28 22:01:35,235, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 202
2022-05-28 22:01:36,410, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:36,410, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:38,985, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 207
2022-05-28 22:01:38,985, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 207
2022-05-28 22:01:38,991, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:38,991, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:41,562, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 239
2022-05-28 22:01:41,562, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 239
2022-05-28 22:01:41,567, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:41,567, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:44,137, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 244
2022-05-28 22:01:44,137, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 244
2022-05-28 22:01:44,142, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:44,142, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:46,698, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 253
2022-05-28 22:01:46,698, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 253
2022-05-28 22:01:46,704, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:46,704, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:49,268, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 243
2022-05-28 22:01:49,268, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 243
2022-05-28 22:01:49,273, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:49,273, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:51,719, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 180
2022-05-28 22:01:51,719, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 180
2022-05-28 22:01:51,788, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:51,788, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:54,376, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 220
2022-05-28 22:01:54,376, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 220
2022-05-28 22:01:54,381, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:54,381, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:56,956, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 202
2022-05-28 22:01:56,956, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 202
2022-05-28 22:01:56,961, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:56,961, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:59,529, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 222
2022-05-28 22:01:59,529, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 222
2022-05-28 22:01:59,534, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:01:59,534, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:02,087, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 239
2022-05-28 22:02:02,087, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 239
2022-05-28 22:02:02,092, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:02,092, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:04,663, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 255
2022-05-28 22:02:04,663, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 255
2022-05-28 22:02:04,668, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:04,668, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:07,240, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 211
2022-05-28 22:02:07,240, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 211
2022-05-28 22:02:07,246, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:07,246, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:09,810, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 253
2022-05-28 22:02:09,810, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 253
2022-05-28 22:02:09,815, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:09,815, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:12,390, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 233
2022-05-28 22:02:12,390, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 233
2022-05-28 22:02:12,395, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:12,395, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:14,966, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 257
2022-05-28 22:02:14,966, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 257
2022-05-28 22:02:14,971, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:14,971, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:17,556, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 247
2022-05-28 22:02:17,556, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 247
2022-05-28 22:02:17,561, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:17,561, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:20,142, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 248
2022-05-28 22:02:20,142, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 248
2022-05-28 22:02:20,147, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:20,147, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:22,720, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 263
2022-05-28 22:02:22,720, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 263
2022-05-28 22:02:22,795, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:22,795, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:25,354, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 225
2022-05-28 22:02:25,354, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 225
2022-05-28 22:02:25,359, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:25,359, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:27,929, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 255
2022-05-28 22:02:27,929, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 255
2022-05-28 22:02:27,934, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:27,934, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:30,489, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 262
2022-05-28 22:02:30,489, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 262
2022-05-28 22:02:30,494, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:30,494, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:33,047, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 231
2022-05-28 22:02:33,047, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 231
2022-05-28 22:02:33,052, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:33,052, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:35,631, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 243
2022-05-28 22:02:35,631, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 243
2022-05-28 22:02:35,635, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:35,635, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:38,223, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 239
2022-05-28 22:02:38,223, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 239
2022-05-28 22:02:38,229, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:38,229, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:40,761, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 236
2022-05-28 22:02:40,761, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 236
2022-05-28 22:02:40,912, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:40,912, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:43,583, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 181
2022-05-28 22:02:43,583, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 181
2022-05-28 22:02:45,593, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:45,593, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:48,378, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 238
2022-05-28 22:02:48,378, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 238
2022-05-28 22:02:48,384, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:48,384, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:02:51,030, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 231
2022-05-28 22:02:51,030, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 231
2022-05-28 22:03:21,450, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:21,450, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:24,090, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 245
2022-05-28 22:03:24,090, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 245
2022-05-28 22:03:24,096, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:24,096, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:26,683, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 230
2022-05-28 22:03:26,683, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 230
2022-05-28 22:03:26,688, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:26,688, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:29,268, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 240
2022-05-28 22:03:29,268, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 240
2022-05-28 22:03:29,273, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:29,273, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:31,853, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 259
2022-05-28 22:03:31,853, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 259
2022-05-28 22:03:31,857, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:31,857, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:34,463, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 190
2022-05-28 22:03:34,463, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 190
2022-05-28 22:03:34,468, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:34,468, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:37,091, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 250
2022-05-28 22:03:37,091, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 250
2022-05-28 22:03:37,096, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:37,096, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:39,686, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 228
2022-05-28 22:03:39,686, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 228
2022-05-28 22:03:39,691, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:39,691, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:42,289, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 233
2022-05-28 22:03:42,289, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 233
2022-05-28 22:03:42,295, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:42,295, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:44,898, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 145
2022-05-28 22:03:44,898, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 145
2022-05-28 22:03:44,968, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:44,968, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:47,574, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 232
2022-05-28 22:03:47,574, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 232
2022-05-28 22:03:47,579, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:47,579, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:50,160, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 263
2022-05-28 22:03:50,160, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 263
2022-05-28 22:03:50,162, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:50,162, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:52,739, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 224
2022-05-28 22:03:52,739, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 224
2022-05-28 22:03:52,744, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:52,744, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:55,315, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 182
2022-05-28 22:03:55,315, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 182
2022-05-28 22:03:55,319, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:55,319, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:57,886, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 178
2022-05-28 22:03:57,886, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 178
2022-05-28 22:03:57,891, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:03:57,891, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:00,564, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 245
2022-05-28 22:04:00,564, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 245
2022-05-28 22:04:00,569, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:00,569, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:03,141, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 177
2022-05-28 22:04:03,141, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 177
2022-05-28 22:04:03,146, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:03,146, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:05,706, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 267
2022-05-28 22:04:05,706, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 267
2022-05-28 22:04:05,711, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:05,711, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:08,276, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 247
2022-05-28 22:04:08,276, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 247
2022-05-28 22:04:08,281, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:08,281, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:09,722, INFO Started server process [1370464]
2022-05-28 22:04:09,723, INFO Waiting for application startup.
2022-05-28 22:04:09,723, INFO Application startup complete.
2022-05-28 22:04:09,723, ERROR [Errno 98] error while attempting to bind on address ('0.0.0.0', 9090): address already in use
2022-05-28 22:04:09,723, INFO Waiting for application shutdown.
2022-05-28 22:04:09,723, INFO Application shutdown complete.
2022-05-28 22:04:10,829, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 238
2022-05-28 22:04:10,829, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 238
2022-05-28 22:04:10,834, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:10,834, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:13,398, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 224
2022-05-28 22:04:13,398, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 224
2022-05-28 22:04:13,403, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:13,403, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:15,966, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 183
2022-05-28 22:04:15,966, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 183
2022-05-28 22:04:15,971, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:15,971, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:18,532, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 267
2022-05-28 22:04:18,532, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 267
2022-05-28 22:04:18,537, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:18,537, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:21,093, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 173
2022-05-28 22:04:21,093, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 173
2022-05-28 22:04:21,098, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:21,098, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:23,653, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 252
2022-05-28 22:04:23,653, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 252
2022-05-28 22:04:23,659, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:23,659, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:26,215, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 231
2022-05-28 22:04:26,215, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 231
2022-05-28 22:04:26,220, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:26,220, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:28,781, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 189
2022-05-28 22:04:28,781, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 189
2022-05-28 22:04:28,787, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:28,787, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:31,365, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 261
2022-05-28 22:04:31,365, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 261
2022-05-28 22:04:31,370, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:31,370, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:33,937, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 213
2022-05-28 22:04:33,937, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 213
2022-05-28 22:04:33,942, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:33,942, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:36,530, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 241
2022-05-28 22:04:36,530, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 241
2022-05-28 22:04:36,535, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:36,535, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:39,100, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 208
2022-05-28 22:04:39,100, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 208
2022-05-28 22:04:39,105, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:39,105, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:41,668, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 252
2022-05-28 22:04:41,668, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 252
2022-05-28 22:04:41,673, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:41,673, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:44,226, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 151
2022-05-28 22:04:44,226, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 151
2022-05-28 22:04:44,332, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:44,332, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:46,929, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 167
2022-05-28 22:04:46,929, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 167
2022-05-28 22:04:47,011, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:47,011, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:49,619, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 249
2022-05-28 22:04:49,619, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 249
2022-05-28 22:04:49,624, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:49,624, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:52,241, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 214
2022-05-28 22:04:52,241, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 214
2022-05-28 22:04:52,319, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:52,319, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:54,928, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 259
2022-05-28 22:04:54,928, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 259
2022-05-28 22:04:54,932, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:54,932, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:57,529, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 206
2022-05-28 22:04:57,529, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 206
2022-05-28 22:04:57,534, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:04:57,534, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:05:00,116, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 223
2022-05-28 22:05:00,116, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 223
2022-05-28 22:05:00,121, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:05:00,121, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:05:02,707, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 245
2022-05-28 22:05:02,707, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 245
2022-05-28 22:05:02,715, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:05:02,715, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:05:05,328, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 218
2022-05-28 22:05:05,328, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 218
2022-05-28 22:05:05,335, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:05:05,335, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:05:07,942, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 264
2022-05-28 22:05:07,942, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 264
2022-05-28 22:05:07,948, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:05:07,948, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:05:10,536, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 238
2022-05-28 22:05:10,536, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 238
2022-05-28 22:05:10,541, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:05:10,541, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:05:13,128, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 237
2022-05-28 22:05:13,128, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 237
2022-05-28 22:05:13,133, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:05:13,133, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:05:15,717, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 233
2022-05-28 22:05:15,717, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 233
2022-05-28 22:05:15,723, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:05:15,723, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:05:18,311, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 72
2022-05-28 22:05:18,311, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 72
2022-05-28 22:05:18,450, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:05:18,450, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:05:21,049, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 73
2022-05-28 22:05:21,049, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 73
2022-05-28 22:06:45,487, INFO Started server process [1373785]
2022-05-28 22:06:45,488, INFO Waiting for application startup.
2022-05-28 22:06:45,488, INFO Application startup complete.
2022-05-28 22:06:45,488, INFO Uvicorn running on http://0.0.0.0:9090 (Press CTRL+C to quit)
2022-05-28 22:06:50,425, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:06:53,085, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 164
2022-05-28 22:07:20,908, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:07:23,560, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 238
2022-05-28 22:07:23,566, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:07:26,151, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 216
2022-05-28 22:07:26,156, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:07:28,736, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 237
2022-05-28 22:07:28,741, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:07:30,877, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 172
2022-05-28 22:08:36,180, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:08:38,805, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 194
2022-05-28 22:09:05,869, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:09:08,520, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 262
2022-05-28 22:09:08,526, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:09:11,124, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 219
2022-05-28 22:09:11,130, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:09:13,714, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 253
2022-05-28 22:09:13,719, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:09:16,307, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 116
2022-05-28 22:09:41,658, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:09:43,794, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 214
2022-05-28 22:10:35,041, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:10:37,668, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 246
2022-05-28 22:10:37,674, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:10:40,245, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 231
2022-05-28 22:10:40,250, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:10:42,184, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 175
2022-05-28 22:10:57,870, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:11:00,474, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 261
2022-05-28 22:11:00,479, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:11:01,239, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 101
2022-05-28 22:11:14,820, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:11:17,185, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 217
2022-05-28 22:12:42,779, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:12:45,411, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 96
2022-05-28 22:13:16,180, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:13:18,818, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 284
2022-05-28 22:13:18,825, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:13:21,401, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 286
2022-05-28 22:14:35,823, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:14:38,457, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 266
2022-05-28 22:14:38,465, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:14:41,041, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 275
2022-05-28 22:14:41,048, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:14:43,605, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 213
2022-05-28 22:22:18,408, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:22:19,913, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 156
2022-05-28 22:22:41,018, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:22:43,624, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 283
2022-05-28 22:22:43,630, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:22:46,190, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 258
2022-05-28 22:29:16,240, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:29:18,864, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 134
2022-05-28 22:29:53,785, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:29:56,401, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 250
2022-05-28 22:29:56,408, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:29:58,969, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 169
2022-05-28 22:30:52,438, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:30:55,053, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 102
2022-05-28 22:31:17,856, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:31:20,486, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 95
2022-05-28 22:32:12,724, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:32:13,921, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 102
2022-05-28 22:32:34,029, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:32:34,202, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 63
2022-05-28 22:33:25,301, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:33:27,917, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 242
2022-05-28 22:33:27,924, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:33:30,471, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 122
2022-05-28 22:33:30,477, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:33:33,033, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 123
2022-05-28 22:33:33,038, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:33:35,606, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 186
2022-05-28 22:33:35,612, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:33:35,988, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 70
2022-05-28 22:33:36,792, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:33:39,437, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 96
2022-05-28 22:33:54,504, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:33:57,170, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 251
2022-05-28 22:33:57,176, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:33:59,829, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 172
2022-05-28 22:36:27,378, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:36:28,266, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 92
2022-05-28 22:40:11,932, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:40:14,529, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 258
2022-05-28 22:40:14,534, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:40:17,070, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 235
2022-05-28 22:40:17,075, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:40:19,605, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 249
2022-05-28 22:40:19,611, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:40:22,136, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 258
2022-05-28 22:40:22,142, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:40:24,667, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 234
2022-05-28 22:40:24,672, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:40:27,209, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 231
2022-05-28 22:40:27,215, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:40:29,762, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 270
2022-05-28 22:40:29,767, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:40:30,573, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 113
2022-05-28 22:53:50,271, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:53:53,003, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 256
2022-05-28 22:53:53,010, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 22:53:55,216, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 202
2022-05-28 23:33:58,833, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 23:33:59,585, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 95
2022-05-28 23:34:28,723, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 23:34:31,340, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 257
2022-05-28 23:34:31,345, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 23:34:33,927, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 250
2022-05-28 23:34:33,933, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 23:34:36,172, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 204
2022-05-28 23:35:24,283, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 23:35:25,993, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 164
2022-05-28 23:43:42,067, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 23:43:44,689, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 223
2022-05-28 23:43:44,695, DEBUG Starting new HTTP connection (1): 127.0.0.1:8080
2022-05-28 23:43:44,950, DEBUG http://127.0.0.1:8080 "POST /api/v0/generate HTTP/1.1" 200 73
